import{j as s}from"./ui-vendor-B29bBmtv.js";import{a as l}from"./react-vendor-CGPzL8fz.js";import{C as v,b as C,d as N,f as E,B as p,s as u}from"./index-BXn5fie0.js";import{I as h}from"./input-CNy6IyKs.js";import{J as t}from"./utils-vendor-eZsCaz-O.js";import"./data-vendor-CtvEhjhB.js";import"./analytics-vendor-CXgENQ1a.js";function T(){const[f,g]=l.useState(""),[x,y]=l.useState(""),[i,j]=l.useState(""),[c,o]=l.useState(!1),[d,n]=l.useState(null),S=async()=>{o(!0);try{const e=f||`test-${Date.now()}@example.com`,r=x||"TestPassword123!",{data:a,error:m}=await u.auth.signUp({email:e,password:r});n({type:"email",data:a,error:m}),m?t.error(`Email signup failed: ${m.message}`):t.success("Email signup successful!")}catch(e){t.error(`Error: ${e.message}`),n({type:"email",error:e})}finally{o(!1)}},w=async()=>{o(!0);try{const e=i||"+15551234567",{data:r,error:a}=await u.auth.signInWithOtp({phone:e,options:{channel:"sms"}});n({type:"phone",data:r,error:a}),a?t.error(`SMS signup failed: ${a.message}`):t.success("SMS OTP sent!")}catch(e){t.error(`Error: ${e.message}`),n({type:"phone",error:e})}finally{o(!1)}},P=async()=>{o(!0);try{const e=i||"+15551234567",{data:r,error:a}=await u.rpc("create_phone_user",{phone_number:e});n({type:"direct_phone",data:r,error:a}),a?t.error(`Direct phone creation failed: ${a.message}`):r?.success?t.success("Phone user created directly!"):t.error(r?.error||"Unknown error")}catch(e){t.error(`Error: ${e.message}`),n({type:"direct_phone",error:e})}finally{o(!1)}};return s.jsx("div",{className:"mx-auto max-w-2xl p-6",children:s.jsxs(v,{children:[s.jsx(C,{children:s.jsx(N,{children:"Auth System Test"})}),s.jsxs(E,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Test Email Signup"}),s.jsx(h,{type:"email",placeholder:"test@example.com (optional)",value:f,onChange:e=>g(e.target.value)}),s.jsx(h,{type:"password",placeholder:"Password (optional)",value:x,onChange:e=>y(e.target.value)}),s.jsx(p,{onClick:S,disabled:c,className:"w-full",children:"Test Email Signup"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Test SMS Auth"}),s.jsx(h,{type:"tel",placeholder:"+15551234567 (optional)",value:i,onChange:e=>j(e.target.value)}),s.jsx(p,{onClick:w,disabled:c,className:"w-full",variant:"outline-solid",children:"Test SMS OTP"}),s.jsx(p,{onClick:P,disabled:c,className:"w-full",variant:"secondary",children:"Test Direct Phone Creation (Workaround)"})]}),d&&s.jsxs("div",{className:"mt-4 rounded-lg bg-muted p-4",children:[s.jsxs("h4",{className:"font-semibold mb-2",children:["Result (",d.type,"):"]}),s.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(d,null,2)})]})]})]})})}function O(){return s.jsx(T,{})}export{O as default};
