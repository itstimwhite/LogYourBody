const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WeightStep-fLntRKjE.js","assets/ui-vendor-QE-oobKj.js","assets/react-vendor-ClhmtWht.js","assets/index-D69SCsvj.js","assets/data-vendor-DLfSSb0Z.js","assets/utils-vendor-BycXaddh.js","assets/analytics-vendor-CXgENQ1a.js","assets/index-jLW3d3co.css","assets/weight-logging-BIZ1MV3J.js","assets/use-supabase-body-metrics-BQLJwBg7.js","assets/input-8QVqFKxr.js","assets/label-DZft6xYU.js","assets/VersionDisplay-BxpSyFxf.js","assets/use-swipe-navigation-eIglpj1B.js","assets/BodyFatStep-DFKFuOds.js","assets/MethodStep-DfX6ZUsU.js","assets/ReviewStep-B5uK_Raa.js","assets/AvatarSilhouette-DtKnYoO6.js"])))=>i.map(i=>d[i]);
import{_ as ce}from"./data-vendor-DLfSSb0Z.js";import{j as r,e as at,f as Gt,g as zt,h as qt,i as Yt,k as Xt,l as nt,I as Jt,m as Zt,n as rt,o as Qt,p as st,q as ea,r as ta,s as it,t as ot,L as lt,u as ct}from"./ui-vendor-QE-oobKj.js";import{R as N,a as l,u as aa}from"./react-vendor-ClhmtWht.js";import{m as T,g as w,A as ve,k as dt,i as be,B as H,f as na,H as je,I as Ne,t as pe,C as ra,b as sa,c as ia,d as oa,e as la,u as ca}from"./index-D69SCsvj.js";import{D as da,a as ua,b as fa,c as ma,u as ha}from"./use-supabase-body-metrics-BQLJwBg7.js";import{I as Fe}from"./input-8QVqFKxr.js";import{L as G}from"./label-DZft6xYU.js";import{p as ut,m as ft,q as pa,L as ga,d as ba,n as xa,A as va,S as Ke,r as ya,e as wa,a as ja,s as Na,X as Ea,H as Sa,P as Ge,u as ze}from"./utils-vendor-BycXaddh.js";import{V as $a}from"./VersionDisplay-BxpSyFxf.js";import{u as ka}from"./use-swipe-navigation-eIglpj1B.js";const Fa={animation:{spring:{type:"spring",damping:20,stiffness:300},fadeIn:{duration:.25,ease:"easeOut"},slideIn:{duration:.3,ease:"easeInOut"}}},U=e=>Fa.animation[e],L={profileValue:"text-xl md:text-3xl lg:text-4xl font-semibold leading-none text-foreground",profileLabel:"text-[10px] md:text-sm font-medium uppercase opacity-70 tracking-wider text-muted-foreground",profileUnit:"text-lg md:text-2xl font-medium opacity-80 text-muted-foreground",attributeLabel:"text-[9px] md:text-xs font-medium uppercase opacity-70 tracking-wider text-muted-foreground",attributeValue:"text-[11px] md:text-sm font-semibold text-foreground",timelineLabel:"text-[9px] md:text-xs font-medium opacity-70 text-muted-foreground",timelineValue:"text-xs md:text-base font-semibold text-foreground",statsGrid:"grid grid-cols-2 gap-2 md:flex md:flex-col md:gap-4",attributeRow:"grid grid-cols-3 gap-2 min-h-[32px] md:min-h-[48px]",avatarContainer:"relative h-[35vh] max-h-[280px] md:h-full w-full",safeArea:"pb-[env(safe-area-inset-bottom)]"},Ta=N.memo(function({metrics:t,formattedWeight:a,formattedLeanBodyMass:n,className:s}){const i=U("fadeIn"),o=[{value:(t.bodyFatPercentage||0).toFixed(1),unit:"%",label:"Body Fat",accessibilityLabel:`Body fat percentage: ${(t.bodyFatPercentage||0).toFixed(1)} percent`},{value:a,label:"Weight",accessibilityLabel:`Weight: ${a}`},{value:isNaN(t.ffmi)||!isFinite(t.ffmi)?"--":t.ffmi.toFixed(1),label:"FFMI",accessibilityLabel:`Fat Free Mass Index: ${isNaN(t.ffmi)||!isFinite(t.ffmi)?"not available":t.ffmi.toFixed(1)}`},{value:n,label:"Lean Body Mass",accessibilityLabel:`Lean body mass: ${n}`}];return r.jsx(T.div,{className:w(L.statsGrid,"mb-3 md:mb-8",s),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:i,children:o.map((c,d)=>r.jsxs(T.div,{className:"min-w-0 flex-shrink-0 text-center md:text-left",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...i,delay:d*.05},children:[r.jsxs("div",{className:"flex items-baseline justify-center gap-1 md:justify-start","aria-label":c.accessibilityLabel,children:[r.jsx("span",{className:w(L.profileValue,"font-inter tracking-tight"),children:c.value}),c.unit&&r.jsx("span",{className:L.profileUnit,children:c.unit})]}),r.jsx("div",{className:w(L.profileLabel,"mt-0.5"),children:c.label})]},c.label))})}),Pa=(e,t)=>{N.useEffect(()=>{const a=`Stats updated: Body fat ${(e.bodyFatPercentage||0).toFixed(1)} percent, Weight ${t}, FFMI ${e.ffmi}`,n=document.createElement("div");n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),n.style.position="absolute",n.style.left="-10000px",n.style.width="1px",n.style.height="1px",n.style.overflow="hidden",document.body.appendChild(n),setTimeout(()=>{n.textContent=a,setTimeout(()=>{document.body.removeChild(n)},1e3)},100)},[e.bodyFatPercentage,t,e.ffmi])},Da=e=>{if(!e)return 0;try{const t=typeof e=="string"?new Date(e):e;if(!t||isNaN(t.getTime()))return console.warn("Invalid birth date provided:",e),0;const s=(new Date().getTime()-t.getTime())/(1e3*60*60*24);return Math.floor(s/365.25)}catch(t){return console.error("Error calculating age:",t,"birthDate:",e),0}},La=N.memo(function({user:t,userAge:a,formattedHeight:n,className:s}){const i=U("fadeIn"),o=t.birthDate?Da(t.birthDate):0,c=o>0?o:a,d=c>0,m=[{label:"Age",value:d?c.toString():"",accessibilityLabel:d?`Age: ${c} years old`:"Age not available",hidden:!d},{label:"Height",value:n,accessibilityLabel:`Height: ${n}`},{label:"Sex",value:t.gender?t.gender.charAt(0).toUpperCase()+t.gender.slice(1):"Not specified",accessibilityLabel:`Sex: ${t.gender||"Not specified"}`}];return r.jsx(T.div,{className:w(L.attributeRow,"pt-3 md:pt-6",s),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...i,delay:.3},children:m.map((h,f)=>r.jsxs(T.div,{className:w("flex flex-col justify-center text-center md:text-left",h.hidden&&"pointer-events-none opacity-0"),initial:{opacity:0,scale:.95},animate:{opacity:h.hidden?0:1,scale:1},transition:{...i,delay:.4+f*.05},"aria-hidden":h.hidden,children:[r.jsx("div",{className:w(L.attributeLabel,"mb-1"),children:h.label}),r.jsx("div",{className:L.attributeValue,"aria-label":h.accessibilityLabel,children:h.value||"-"})]},h.label))})}),Ia=(e,t,a)=>{N.useEffect(()=>{const n=[];if(t>0&&n.push(`${t} years old`),a&&n.push(`Height ${a}`),e.gender&&n.push(`${e.gender}`),n.length>0){const s=`User profile: ${n.join(", ")}`,i=document.createElement("div");i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),i.style.position="absolute",i.style.left="-10000px",i.style.width="1px",i.style.height="1px",i.style.overflow="hidden",document.body.appendChild(i),setTimeout(()=>{i.textContent=s,setTimeout(()=>{document.body.removeChild(i)},1e3)},100)}},[e.gender,t,a])},Aa=N.memo(function({metrics:t,user:a,userAge:n,formattedWeight:s,formattedHeight:i,formattedLeanBodyMass:o,className:c}){const d=U("fadeIn");return Pa(t,s),Ia(a,n,i),N.useEffect(()=>{typeof window<"u"&&window.gtag&&window.gtag("event","profile_viewed",{event_category:"Profile",event_label:"Profile Panel",custom_parameters:{user_has_name:!!a.name,user_has_height:!!i,user_has_age:n>0,body_fat_percentage:t.bodyFatPercentage,ffmi:t.ffmi}})},[t,a,n,i]),r.jsxs(T.div,{className:w("flex h-full w-full flex-col justify-center p-3 md:p-6","bg-background/95 backdrop-blur-sm",c),initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:d,role:"region","aria-label":"User profile and body metrics",children:[a.name&&r.jsx(T.div,{className:"mb-3 md:mb-8",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{...d,delay:.1},children:r.jsx("h1",{className:"text-sm font-semibold tracking-tight text-foreground md:text-lg",children:a.name})}),r.jsx(Ta,{metrics:t,formattedWeight:s,formattedLeanBodyMass:o}),r.jsx("div",{className:"mt-auto border-t border-border/30",children:r.jsx(La,{user:a,userAge:n,formattedHeight:i})})]})}),Me=l.forwardRef(({className:e,...t},a)=>r.jsxs(at,{ref:a,className:w("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(Gt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(zt,{className:"absolute h-full bg-primary"})}),r.jsx(qt,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Me.displayName=at.displayName;const Ca=N.memo(function({metrics:t,selectedIndex:a,onIndexChange:n,className:s}){const i=U("fadeIn"),[o,c]=l.useState({selectedIndex:a,isDragging:!1,announcement:""});l.useEffect(()=>{c(b=>({...b,selectedIndex:a}))},[a]);const d=l.useCallback(b=>b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),[]),m=l.useCallback(b=>b.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),[]),h=l.useCallback(b=>{const j=b[0];c(F=>({...F,selectedIndex:j})),n(j);const k=t[j];if(k){const F=`Entry ${j+1} of ${t.length}, ${m(k.date)}`;c(E=>({...E,announcement:F}))}typeof window<"u"&&window.gtag&&window.gtag("event","timeline_changed",{event_category:"Profile",event_label:"Timeline Navigation",value:j,custom_parameters:{total_entries:t.length,entry_date:k?d(k.date):null}})},[t,n,d,m]),f=l.useCallback(()=>{c(b=>({...b,isDragging:!0}))},[]),x=l.useCallback(()=>{c(b=>({...b,isDragging:!1}))},[]),g=l.useMemo(()=>t[o.selectedIndex],[t,o.selectedIndex]);if(t.length===0)return null;const v=g?.date,y=t[0]?.date,p=t[t.length-1]?.date,u={value:[o.selectedIndex],onValueChange:h,onPointerDown:f,onPointerUp:x,max:t.length-1,min:0,step:1,"aria-label":`Timeline slider. Entry ${o.selectedIndex+1} of ${t.length}`,"aria-valuetext":v?`${m(v)}, entry ${o.selectedIndex+1} of ${t.length}`:void 0,"aria-describedby":"timeline-description"};return r.jsxs(T.div,{className:w("w-full border-t border-border/50 bg-background shadow-sm",L.safeArea,s),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:i,children:[r.jsx("div",{className:"px-4 py-3 md:px-6 md:py-6",children:r.jsxs("div",{className:"space-y-3 md:space-y-4",children:[r.jsxs(T.div,{className:"text-center",layout:!0,children:[r.jsx("div",{className:w(L.timelineValue,"tracking-tight"),"aria-live":"polite","aria-atomic":"true",children:v?d(v):"No date"}),r.jsxs("div",{className:w(L.timelineLabel,"mt-1"),id:"timeline-description",children:["Entry ",o.selectedIndex+1," of ",t.length]})]}),r.jsx("div",{className:"px-2 md:px-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Me,{...u,className:w("timeline-slider w-full","[&_[role=slider]]:h-6 [&_[role=slider]]:w-6","[&_[role=slider]]:border-2 [&_[role=slider]]:border-background","[&_[role=slider]]:shadow-lg [&_[role=slider]]:focus:shadow-xl","[&_.relative]:h-2")}),t.length>1&&r.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-1/2 flex -translate-y-1/2 transform justify-between",children:[r.jsx("div",{className:"h-1 w-1 rounded-full bg-muted-foreground/50"}),r.jsx("div",{className:"h-1 w-1 rounded-full bg-muted-foreground/50"})]})]})}),t.length>1&&y&&p&&r.jsxs(T.div,{className:"flex justify-between px-2 md:px-4",initial:{opacity:0},animate:{opacity:1},transition:{...i,delay:.2},children:[r.jsx("span",{className:w(L.timelineLabel,"text-left"),"aria-label":`Earliest entry: ${m(y)}`,children:d(y)}),r.jsx("span",{className:w(L.timelineLabel,"text-right"),"aria-label":`Latest entry: ${m(p)}`,children:d(p)})]})]})}),r.jsx("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:o.announcement})]})}),qe=N.memo(function({src:t,alt:a,placeholder:n="/placeholder.svg",className:s,fallback:i,...o}){const[c,d]=l.useState(!1),[m,h]=l.useState(!1),[f,x]=l.useState(!1),g=l.useRef(null);l.useEffect(()=>{const p=new IntersectionObserver(([u])=>{u.isIntersecting&&(h(!0),p.disconnect())},{threshold:.1});return g.current&&p.observe(g.current),()=>p.disconnect()},[]);const v=()=>{d(!0),x(!1)},y=()=>{x(!0),d(!1)};return f&&i?r.jsx(r.Fragment,{children:i}):r.jsxs("div",{ref:g,className:w("relative overflow-hidden",s),children:[!c&&r.jsx("img",{src:n,alt:"",className:w("absolute inset-0 h-full w-full object-cover transition-opacity duration-300",c?"opacity-0":"opacity-100"),"aria-hidden":"true"}),!c&&m&&r.jsx("div",{className:"absolute inset-0 animate-pulse bg-gradient-to-r from-transparent via-white/20 to-transparent"}),m&&r.jsx("img",{src:t,alt:a,onLoad:v,onError:y,className:w("h-full w-full object-cover transition-opacity duration-300",c?"opacity-100":"opacity-0"),loading:"lazy",...o})]})});function Ma(e){return Math.max(5,Math.min(50,Math.round(e/5)*5))}function _a(e){const{bodyFat:t=20,gender:a="male"}=e;return{bodyFat:Ma(t),sex:a==="female"?"f":"m"}}function Ra(e){return`${e.sex}_bf${e.bodyFat}.svg`}function mt(e){return`/avatars/${Ra(e)}`}function Ha(e){const t=_a(e);return mt(t)}function Oa(e){const t={bodyFat:20,sex:e.sex};return mt(t)}const Ye=N.memo(function({gender:t,bodyFatPercentage:a,showPhoto:n,profileImage:s,className:i,weight:o=70,height:c=170,age:d=30}){U("fadeIn");const m=U("spring"),[h,f]=l.useState(!1),x=l.useMemo(()=>Ha({bodyFat:a,gender:t}),[o,c,a,d,t]),g=l.useMemo(()=>Oa({sex:t==="female"?"f":"m"}),[a,t]),v=()=>{f(!0)},y=()=>{f(!1)};return r.jsx("div",{className:w(L.avatarContainer,"overflow-hidden",i),children:r.jsx("div",{className:"flex h-full items-center justify-center p-4",children:r.jsx(ve,{mode:"wait",children:n&&s?r.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:m,className:"max-h-full max-w-full",children:r.jsx(qe,{src:s,alt:"Profile photo showing current body composition",className:"max-h-full max-w-full rounded-lg object-contain shadow-lg"})},"photo"):r.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:m,className:"flex h-64 w-40 items-center justify-center md:h-80 md:w-48",children:r.jsx(qe,{src:h?g:x,alt:`${t} body composition wireframe showing ${(a||0).toFixed(1)}% body fat`,className:"h-full w-full object-contain",onError:v,onLoad:y,style:{filter:"drop-shadow(0 0 8px rgba(255, 255, 255, 0.1))"}})},"avatar")})})})}),ht=typeof document<"u"?N.useLayoutEffect:()=>{};function Wa(e){const t=l.useRef(null);return ht(()=>{t.current=e},[e]),l.useCallback((...a)=>{const n=t.current;return n?.(...a)},[])}const V=e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},z=e=>e&&"window"in e&&e.window===e?e:V(e).defaultView||window;function Ba(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function Ua(e){return Ba(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let Va=!1;function _e(){return Va}function pt(e,t){if(!_e())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let a=t;for(;a!==null;){if(a===e)return!0;a.tagName==="SLOT"&&a.assignedSlot?a=a.assignedSlot.parentNode:Ua(a)?a=a.host:a=a.parentNode}return!1}const Te=(e=document)=>{var t;if(!_e())return e.activeElement;let a=e.activeElement;for(;a&&"shadowRoot"in a&&(!((t=a.shadowRoot)===null||t===void 0)&&t.activeElement);)a=a.shadowRoot.activeElement;return a};function gt(e){return _e()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function Ka(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(a=>e.test(a.brand)))||e.test(window.navigator.userAgent)}function Ga(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function bt(e){let t=null;return()=>(t==null&&(t=e()),t)}const za=bt(function(){return Ga(/^Mac/i)}),qa=bt(function(){return Ka(/Android/i)});function xt(){let e=l.useRef(new Map),t=l.useCallback((s,i,o,c)=>{let d=c?.once?(...m)=>{e.current.delete(o),o(...m)}:o;e.current.set(o,{type:i,eventTarget:s,fn:d,options:c}),s.addEventListener(i,d,c)},[]),a=l.useCallback((s,i,o,c)=>{var d;let m=((d=e.current.get(o))===null||d===void 0?void 0:d.fn)||o;s.removeEventListener(i,m,c),e.current.delete(o)},[]),n=l.useCallback(()=>{e.current.forEach((s,i)=>{a(s.eventTarget,s.type,i,s.options)})},[a]);return l.useEffect(()=>n,[n]),{addGlobalListener:t,removeGlobalListener:a,removeAllGlobalListeners:n}}function Ya(e){return e.mozInputSource===0&&e.isTrusted?!0:qa()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function vt(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function Xa(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function yt(e){let t=l.useRef({isFocused:!1,observer:null});ht(()=>{const n=t.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]);let a=Wa(n=>{e?.(n)});return l.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){t.current.isFocused=!0;let s=n.target,i=o=>{if(t.current.isFocused=!1,s.disabled){let c=vt(o);a(c)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};s.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&s.disabled){var o;(o=t.current.observer)===null||o===void 0||o.disconnect();let c=s===document.activeElement?null:document.activeElement;s.dispatchEvent(new FocusEvent("blur",{relatedTarget:c})),s.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:c}))}}),t.current.observer.observe(s,{attributes:!0,attributeFilter:["disabled"]})}},[a])}let Ja=!1,de=null,Pe=new Set,le=new Map,Y=!1,De=!1;const Za={Tab:!0,Escape:!0};function Re(e,t){for(let a of Pe)a(e,t)}function Qa(e){return!(e.metaKey||!za()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function xe(e){Y=!0,Qa(e)&&(de="keyboard",Re("keyboard",e))}function Q(e){de="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(Y=!0,Re("pointer",e))}function wt(e){Ya(e)&&(Y=!0,de="virtual")}function jt(e){e.target===window||e.target===document||Ja||!e.isTrusted||(!Y&&!De&&(de="virtual",Re("virtual",e)),Y=!1,De=!1)}function Nt(){Y=!1,De=!0}function Le(e){if(typeof window>"u"||typeof document>"u"||le.get(z(e)))return;const t=z(e),a=V(e);let n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Y=!0,n.apply(this,arguments)},a.addEventListener("keydown",xe,!0),a.addEventListener("keyup",xe,!0),a.addEventListener("click",wt,!0),t.addEventListener("focus",jt,!0),t.addEventListener("blur",Nt,!1),typeof PointerEvent<"u"&&(a.addEventListener("pointerdown",Q,!0),a.addEventListener("pointermove",Q,!0),a.addEventListener("pointerup",Q,!0)),t.addEventListener("beforeunload",()=>{Et(e)},{once:!0}),le.set(t,{focus:n})}const Et=(e,t)=>{const a=z(e),n=V(e);t&&n.removeEventListener("DOMContentLoaded",t),le.has(a)&&(a.HTMLElement.prototype.focus=le.get(a).focus,n.removeEventListener("keydown",xe,!0),n.removeEventListener("keyup",xe,!0),n.removeEventListener("click",wt,!0),a.removeEventListener("focus",jt,!0),a.removeEventListener("blur",Nt,!1),typeof PointerEvent<"u"&&(n.removeEventListener("pointerdown",Q,!0),n.removeEventListener("pointermove",Q,!0),n.removeEventListener("pointerup",Q,!0)),le.delete(a))};function en(e){const t=V(e);let a;return t.readyState!=="loading"?Le(e):(a=()=>{Le(e)},t.addEventListener("DOMContentLoaded",a)),()=>Et(e,a)}typeof document<"u"&&en();function St(){return de!=="pointer"}const tn=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function an(e,t,a){let n=V(a?.target);const s=typeof window<"u"?z(a?.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?z(a?.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?z(a?.target).HTMLElement:HTMLElement,c=typeof window<"u"?z(a?.target).KeyboardEvent:KeyboardEvent;return e=e||n.activeElement instanceof s&&!tn.has(n.activeElement.type)||n.activeElement instanceof i||n.activeElement instanceof o&&n.activeElement.isContentEditable,!(e&&t==="keyboard"&&a instanceof c&&!Za[a.key])}function nn(e,t,a){Le(),l.useEffect(()=>{let n=(s,i)=>{an(!!a?.isTextInput,s,i)&&e(St())};return Pe.add(n),()=>{Pe.delete(n)}},t)}function rn(e){let{isDisabled:t,onFocus:a,onBlur:n,onFocusChange:s}=e;const i=l.useCallback(d=>{if(d.target===d.currentTarget)return n&&n(d),s&&s(!1),!0},[n,s]),o=yt(i),c=l.useCallback(d=>{const m=V(d.target),h=m?Te(m):Te();d.target===d.currentTarget&&h===gt(d.nativeEvent)&&(a&&a(d),s&&s(!0),o(d))},[s,a,o]);return{focusProps:{onFocus:!t&&(a||s||n)?c:void 0,onBlur:!t&&(n||s)?i:void 0}}}function sn(e){let{isDisabled:t,onBlurWithin:a,onFocusWithin:n,onFocusWithinChange:s}=e,i=l.useRef({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:c}=xt(),d=l.useCallback(f=>{f.currentTarget.contains(f.target)&&i.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(i.current.isFocusWithin=!1,c(),a&&a(f),s&&s(!1))},[a,s,i,c]),m=yt(d),h=l.useCallback(f=>{if(!f.currentTarget.contains(f.target))return;const x=V(f.target),g=Te(x);if(!i.current.isFocusWithin&&g===gt(f.nativeEvent)){n&&n(f),s&&s(!0),i.current.isFocusWithin=!0,m(f);let v=f.currentTarget;o(x,"focus",y=>{if(i.current.isFocusWithin&&!pt(v,y.target)){let p=new x.defaultView.FocusEvent("blur",{relatedTarget:y.target});Xa(p,v);let u=vt(p);d(u)}},{capture:!0})}},[n,s,m,o,d]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:h,onBlur:d}}}let Ie=!1,Ee=0;function on(){Ie=!0,setTimeout(()=>{Ie=!1},50)}function Xe(e){e.pointerType==="touch"&&on()}function ln(){if(!(typeof document>"u"))return typeof PointerEvent<"u"&&document.addEventListener("pointerup",Xe),Ee++,()=>{Ee--,!(Ee>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Xe)}}function cn(e){let{onHoverStart:t,onHoverChange:a,onHoverEnd:n,isDisabled:s}=e,[i,o]=l.useState(!1),c=l.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;l.useEffect(ln,[]);let{addGlobalListener:d,removeAllGlobalListeners:m}=xt(),{hoverProps:h,triggerHoverEnd:f}=l.useMemo(()=>{let x=(y,p)=>{if(c.pointerType=p,s||p==="touch"||c.isHovered||!y.currentTarget.contains(y.target))return;c.isHovered=!0;let u=y.currentTarget;c.target=u,d(V(y.target),"pointerover",b=>{c.isHovered&&c.target&&!pt(c.target,b.target)&&g(b,b.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:u,pointerType:p}),a&&a(!0),o(!0)},g=(y,p)=>{let u=c.target;c.pointerType="",c.target=null,!(p==="touch"||!c.isHovered||!u)&&(c.isHovered=!1,m(),n&&n({type:"hoverend",target:u,pointerType:p}),a&&a(!1),o(!1))},v={};return typeof PointerEvent<"u"&&(v.onPointerEnter=y=>{Ie&&y.pointerType==="mouse"||x(y,y.pointerType)},v.onPointerLeave=y=>{!s&&y.currentTarget.contains(y.target)&&g(y,y.pointerType)}),{hoverProps:v,triggerHoverEnd:g}},[t,a,n,s,c,d,m]);return l.useEffect(()=>{s&&f({currentTarget:c.target},c.pointerType)},[s]),{hoverProps:h,isHovered:i}}function $t(e={}){let{autoFocus:t=!1,isTextInput:a,within:n}=e,s=l.useRef({isFocused:!1,isFocusVisible:t||St()}),[i,o]=l.useState(!1),[c,d]=l.useState(()=>s.current.isFocused&&s.current.isFocusVisible),m=l.useCallback(()=>d(s.current.isFocused&&s.current.isFocusVisible),[]),h=l.useCallback(g=>{s.current.isFocused=g,o(g),m()},[m]);nn(g=>{s.current.isFocusVisible=g,m()},[],{isTextInput:a});let{focusProps:f}=rn({isDisabled:n,onFocusChange:h}),{focusWithinProps:x}=sn({isDisabled:!n,onFocusWithinChange:h});return{isFocused:i,isFocusVisible:c,focusProps:n?x:f}}var dn=Object.defineProperty,un=(e,t,a)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Se=(e,t,a)=>(un(e,typeof t!="symbol"?t+"":t,a),a);let fn=class{constructor(){Se(this,"current",this.detect()),Se(this,"handoffState","pending"),Se(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},kt=new fn;function Ft(e){var t,a;return kt.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?(a=(t=e.current)==null?void 0:t.ownerDocument)!=null?a:document:null:document}function Tt(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Pt(){let e=[],t={addEventListener(a,n,s,i){return a.addEventListener(n,s,i),t.add(()=>a.removeEventListener(n,s,i))},requestAnimationFrame(...a){let n=requestAnimationFrame(...a);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...a){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...a))},setTimeout(...a){let n=setTimeout(...a);return t.add(()=>clearTimeout(n))},microTask(...a){let n={current:!0};return Tt(()=>{n.current&&a[0]()}),t.add(()=>{n.current=!1})},style(a,n,s){let i=a.style.getPropertyValue(n);return Object.assign(a.style,{[n]:s}),this.add(()=>{Object.assign(a.style,{[n]:i})})},group(a){let n=Pt();return a(n),this.add(()=>n.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let n=e.indexOf(a);if(n>=0)for(let s of e.splice(n,1))s()}},dispose(){for(let a of e.splice(0))a()}};return t}function mn(){let[e]=l.useState(Pt);return l.useEffect(()=>()=>e.dispose(),[e]),e}let ee=(e,t)=>{kt.isServer?l.useEffect(e,t):l.useLayoutEffect(e,t)};function ie(e){let t=l.useRef(e);return ee(()=>{t.current=e},[e]),t}let O=function(e){let t=ie(e);return N.useCallback((...a)=>t.current(...a),[t])};function hn(e){let t=e.width/2,a=e.height/2;return{top:e.clientY-a,right:e.clientX+t,bottom:e.clientY+a,left:e.clientX-t}}function pn(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function gn({disabled:e=!1}={}){let t=l.useRef(null),[a,n]=l.useState(!1),s=mn(),i=O(()=>{t.current=null,n(!1),s.dispose()}),o=O(c=>{if(s.dispose(),t.current===null){t.current=c.currentTarget,n(!0);{let d=Ft(c.currentTarget);s.addEventListener(d,"pointerup",i,!1),s.addEventListener(d,"pointermove",m=>{if(t.current){let h=hn(m);n(pn(h,t.current.getBoundingClientRect()))}},!1),s.addEventListener(d,"pointercancel",i,!1)}}});return{pressed:a,pressProps:e?{}:{onPointerDown:o,onPointerUp:i,onClick:i}}}function Je(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function q(e,t,...a){if(e in t){let s=t[e];return typeof s=="function"?s(...a):s}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,q),n}var Ae=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ae||{}),bn=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(bn||{});function ae(){let e=vn();return l.useCallback(t=>xn({mergeRefs:e,...t}),[e])}function xn({ourProps:e,theirProps:t,slot:a,defaultTag:n,features:s,visible:i=!0,name:o,mergeRefs:c}){c=c??yn;let d=Dt(t,e);if(i)return ge(d,a,n,o,c);let m=s??0;if(m&2){let{static:h=!1,...f}=d;if(h)return ge(f,a,n,o,c)}if(m&1){let{unmount:h=!0,...f}=d;return q(h?0:1,{0(){return null},1(){return ge({...f,hidden:!0,style:{display:"none"}},a,n,o,c)}})}return ge(d,a,n,o,c)}function ge(e,t={},a,n,s){let{as:i=a,children:o,refName:c="ref",...d}=$e(e,["unmount","static"]),m=e.ref!==void 0?{[c]:e.ref}:{},h=typeof o=="function"?o(t):o;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(t)),d["aria-labelledby"]&&d["aria-labelledby"]===d.id&&(d["aria-labelledby"]=void 0);let f={};if(t){let x=!1,g=[];for(let[v,y]of Object.entries(t))typeof y=="boolean"&&(x=!0),y===!0&&g.push(v.replace(/([A-Z])/g,p=>`-${p.toLowerCase()}`));if(x){f["data-headlessui-state"]=g.join(" ");for(let v of g)f[`data-${v}`]=""}}if(i===l.Fragment&&(Object.keys(X(d)).length>0||Object.keys(X(f)).length>0))if(!l.isValidElement(h)||Array.isArray(h)&&h.length>1){if(Object.keys(X(d)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(X(d)).concat(Object.keys(X(f))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=h.props,g=x?.className,v=typeof g=="function"?(...u)=>Je(g(...u),d.className):Je(g,d.className),y=v?{className:v}:{},p=Dt(h.props,X($e(d,["ref"])));for(let u in f)u in p&&delete f[u];return l.cloneElement(h,Object.assign({},p,f,m,{ref:s(wn(h),m.ref)},y))}return l.createElement(i,Object.assign({},$e(d,["ref"]),i!==l.Fragment&&m,i!==l.Fragment&&f),h)}function vn(){let e=l.useRef([]),t=l.useCallback(a=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(a):n.current=a)},[]);return(...a)=>{if(!a.every(n=>n==null))return e.current=a,t}}function yn(...e){return e.every(t=>t==null)?void 0:t=>{for(let a of e)a!=null&&(typeof a=="function"?a(t):a.current=t)}}function Dt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let n of e)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(a[s]!=null||(a[s]=[]),a[s].push(n[s])):t[s]=n[s];if(t.disabled||t["aria-disabled"])for(let n in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(a[n]=[s=>{var i;return(i=s?.preventDefault)==null?void 0:i.call(s)}]);for(let n in a)Object.assign(t,{[n](s,...i){let o=a[n];for(let c of o){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;c(s,...i)}}});return t}function Lt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let n of e)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(a[s]!=null||(a[s]=[]),a[s].push(n[s])):t[s]=n[s];for(let n in a)Object.assign(t,{[n](...s){let i=a[n];for(let o of i)o?.(...s)}});return t}function ne(e){var t;return Object.assign(l.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function X(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function $e(e,t=[]){let a=Object.assign({},e);for(let n of t)n in a&&delete a[n];return a}function wn(e){return N.version.split(".")[0]>="19"?e.props.ref:e.ref}let jn="span";var It=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(It||{});function Nn(e,t){var a;let{features:n=1,...s}=e,i={ref:t,"aria-hidden":(n&2)===2?!0:(a=s["aria-hidden"])!=null?a:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return ae()({ourProps:i,theirProps:s,slot:{},defaultTag:jn,name:"Hidden"})}let At=ne(Nn),En=Symbol();function ue(...e){let t=l.useRef(e);l.useEffect(()=>{t.current=e},[e]);let a=O(n=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return e.every(n=>n==null||n?.[En])?void 0:a}var _=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(_||{});let Sn=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),$n=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var R=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(R||{}),oe=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(oe||{}),kn=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(kn||{});function Fn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Sn)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function Tn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll($n)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var Pn=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Pn||{}),Dn=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Dn||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let Ln=["textarea","input"].join(",");function In(e){var t,a;return(a=(t=e?.matches)==null?void 0:t.call(e,Ln))!=null?a:!1}function Z(e,t=a=>a){return e.slice().sort((a,n)=>{let s=t(a),i=t(n);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function J(e,t,{sorted:a=!0,relativeTo:n=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?a?Z(e):e:t&64?Tn(e):Fn(e);s.length>0&&o.length>1&&(o=o.filter(g=>!s.some(v=>v!=null&&"current"in v?v?.current===g:v===g))),n=n??i.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(n))-1;if(t&4)return Math.max(0,o.indexOf(n))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=t&32?{preventScroll:!0}:{},h=0,f=o.length,x;do{if(h>=f||h+f<=0)return 0;let g=d+h;if(t&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}x=o[g],x?.focus(m),h+=c}while(x!==i.activeElement);return t&6&&In(x)&&x.select(),2}function An(e,t){return l.useMemo(()=>{var a;if(e.type)return e.type;let n=(a=e.as)!=null?a:"button";if(typeof n=="string"&&n.toLowerCase()==="button"||t?.tagName==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Cn(){let e=l.useRef(!1);return ee(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Mn({onFocus:e}){let[t,a]=l.useState(!0),n=Cn();return t?N.createElement(At,{as:"button",type:"button",features:It.Focusable,onFocus:s=>{s.preventDefault();let i,o=50;function c(){if(o--<=0){i&&cancelAnimationFrame(i);return}if(e()){if(cancelAnimationFrame(i),!n.current)return;a(!1);return}i=requestAnimationFrame(c)}i=requestAnimationFrame(c)}}):null}const Ct=l.createContext(null);function _n(){return{groups:new Map,get(e,t){var a;let n=this.groups.get(e);n||(n=new Map,this.groups.set(e,n));let s=(a=n.get(t))!=null?a:0;n.set(t,s+1);let i=Array.from(n.keys()).indexOf(t);function o(){let c=n.get(t);c>1?n.set(t,c-1):n.delete(t)}return[i,o]}}}function Rn({children:e}){let t=l.useRef(_n());return l.createElement(Ct.Provider,{value:t},e)}function Mt(e){let t=l.useContext(Ct);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let a=l.useId(),[n,s]=t.current.get(e,a);return l.useEffect(()=>s,[]),n}var Hn=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Hn||{}),On=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(On||{}),Wn=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Wn||{});let Bn={0(e,t){var a;let n=Z(e.tabs,h=>h.current),s=Z(e.panels,h=>h.current),i=n.filter(h=>{var f;return!((f=h.current)!=null&&f.hasAttribute("disabled"))}),o={...e,tabs:n,panels:s};if(t.index<0||t.index>n.length-1){let h=q(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>q(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(i.length===0)return o;let f=q(h,{0:()=>n.indexOf(i[0]),1:()=>n.indexOf(i[i.length-1])});return{...o,selectedIndex:f===-1?e.selectedIndex:f}}let c=n.slice(0,t.index),d=[...n.slice(t.index),...c].find(h=>i.includes(h));if(!d)return o;let m=(a=n.indexOf(d))!=null?a:e.selectedIndex;return m===-1&&(m=e.selectedIndex),{...o,selectedIndex:m}},1(e,t){if(e.tabs.includes(t.tab))return e;let a=e.tabs[e.selectedIndex],n=Z([...e.tabs,t.tab],i=>i.current),s=e.selectedIndex;return e.info.current.isControlled||(s=n.indexOf(a),s===-1&&(s=e.selectedIndex)),{...e,tabs:n,selectedIndex:s}},2(e,t){return{...e,tabs:e.tabs.filter(a=>a!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:Z([...e.panels,t.panel],a=>a.current)}},4(e,t){return{...e,panels:e.panels.filter(a=>a!==t.panel)}}},He=l.createContext(null);He.displayName="TabsDataContext";function te(e){let t=l.useContext(He);if(t===null){let a=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,te),a}return t}let Oe=l.createContext(null);Oe.displayName="TabsActionsContext";function We(e){let t=l.useContext(Oe);if(t===null){let a=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,We),a}return t}function Un(e,t){return q(t.type,Bn,e,t)}let Vn="div";function Kn(e,t){let{defaultIndex:a=0,vertical:n=!1,manual:s=!1,onChange:i,selectedIndex:o=null,...c}=e;const d=n?"vertical":"horizontal",m=s?"manual":"auto";let h=o!==null,f=ie({isControlled:h}),x=ue(t),[g,v]=l.useReducer(Un,{info:f,selectedIndex:o??a,tabs:[],panels:[]}),y=l.useMemo(()=>({selectedIndex:g.selectedIndex}),[g.selectedIndex]),p=ie(i||(()=>{})),u=ie(g.tabs),b=l.useMemo(()=>({orientation:d,activation:m,...g}),[d,m,g]),j=O($=>(v({type:1,tab:$}),()=>v({type:2,tab:$}))),k=O($=>(v({type:3,panel:$}),()=>v({type:4,panel:$}))),F=O($=>{E.current!==$&&p.current($),h||v({type:0,index:$})}),E=ie(h?e.selectedIndex:g.selectedIndex),D=l.useMemo(()=>({registerTab:j,registerPanel:k,change:F}),[]);ee(()=>{v({type:0,index:o??a})},[o]),ee(()=>{if(E.current===void 0||g.tabs.length<=0)return;let $=Z(g.tabs,C=>C.current);$.some((C,W)=>g.tabs[W]!==C)&&F($.indexOf(g.tabs[E.current]))});let I={ref:x},A=ae();return N.createElement(Rn,null,N.createElement(Oe.Provider,{value:D},N.createElement(He.Provider,{value:b},b.tabs.length<=0&&N.createElement(Mn,{onFocus:()=>{var $,C;for(let W of u.current)if((($=W.current)==null?void 0:$.tabIndex)===0)return(C=W.current)==null||C.focus(),!0;return!1}}),A({ourProps:I,theirProps:c,slot:y,defaultTag:Vn,name:"Tabs"}))))}let Gn="div";function zn(e,t){let{orientation:a,selectedIndex:n}=te("Tab.List"),s=ue(t),i=l.useMemo(()=>({selectedIndex:n}),[n]),o=e,c={ref:s,role:"tablist","aria-orientation":a};return ae()({ourProps:c,theirProps:o,slot:i,defaultTag:Gn,name:"Tabs.List"})}let qn="button";function Yn(e,t){var a,n;let s=l.useId(),{id:i=`headlessui-tabs-tab-${s}`,disabled:o=!1,autoFocus:c=!1,...d}=e,{orientation:m,activation:h,selectedIndex:f,tabs:x,panels:g}=te("Tab"),v=We("Tab"),y=te("Tab"),[p,u]=l.useState(null),b=l.useRef(null),j=ue(b,t,u);ee(()=>v.registerTab(b),[v,b]);let k=Mt("tabs"),F=x.indexOf(b);F===-1&&(F=k);let E=F===f,D=O(S=>{var P;let he=S();if(he===oe.Success&&h==="auto"){let Vt=(P=Ft(b))==null?void 0:P.activeElement,Ve=y.tabs.findIndex(Kt=>Kt.current===Vt);Ve!==-1&&v.change(Ve)}return he}),I=O(S=>{let P=x.map(he=>he.current).filter(Boolean);if(S.key===_.Space||S.key===_.Enter){S.preventDefault(),S.stopPropagation(),v.change(F);return}switch(S.key){case _.Home:case _.PageUp:return S.preventDefault(),S.stopPropagation(),D(()=>J(P,R.First));case _.End:case _.PageDown:return S.preventDefault(),S.stopPropagation(),D(()=>J(P,R.Last))}if(D(()=>q(m,{vertical(){return S.key===_.ArrowUp?J(P,R.Previous|R.WrapAround):S.key===_.ArrowDown?J(P,R.Next|R.WrapAround):oe.Error},horizontal(){return S.key===_.ArrowLeft?J(P,R.Previous|R.WrapAround):S.key===_.ArrowRight?J(P,R.Next|R.WrapAround):oe.Error}}))===oe.Success)return S.preventDefault()}),A=l.useRef(!1),$=O(()=>{var S;A.current||(A.current=!0,(S=b.current)==null||S.focus({preventScroll:!0}),v.change(F),Tt(()=>{A.current=!1}))}),C=O(S=>{S.preventDefault()}),{isFocusVisible:W,focusProps:ye}=$t({autoFocus:c}),{isHovered:fe,hoverProps:re}=cn({isDisabled:o}),{pressed:me,pressProps:we}=gn({disabled:o}),K=l.useMemo(()=>({selected:E,hover:fe,active:me,focus:W,autofocus:c,disabled:o}),[E,fe,W,me,c,o]),M=Lt({ref:j,onKeyDown:I,onMouseDown:C,onClick:$,id:i,role:"tab",type:An(e,p),"aria-controls":(n=(a=g[F])==null?void 0:a.current)==null?void 0:n.id,"aria-selected":E,tabIndex:E?0:-1,disabled:o||void 0,autoFocus:c},ye,re,we);return ae()({ourProps:M,theirProps:d,slot:K,defaultTag:qn,name:"Tabs.Tab"})}let Xn="div";function Jn(e,t){let{selectedIndex:a}=te("Tab.Panels"),n=ue(t),s=l.useMemo(()=>({selectedIndex:a}),[a]),i=e,o={ref:n};return ae()({ourProps:o,theirProps:i,slot:s,defaultTag:Xn,name:"Tabs.Panels"})}let Zn="div",Qn=Ae.RenderStrategy|Ae.Static;function er(e,t){var a,n,s,i;let o=l.useId(),{id:c=`headlessui-tabs-panel-${o}`,tabIndex:d=0,...m}=e,{selectedIndex:h,tabs:f,panels:x}=te("Tab.Panel"),g=We("Tab.Panel"),v=l.useRef(null),y=ue(v,t);ee(()=>g.registerPanel(v),[g,v]);let p=Mt("panels"),u=x.indexOf(v);u===-1&&(u=p);let b=u===h,{isFocusVisible:j,focusProps:k}=$t(),F=l.useMemo(()=>({selected:b,focus:j}),[b,j]),E=Lt({ref:y,id:c,role:"tabpanel","aria-labelledby":(n=(a=f[u])==null?void 0:a.current)==null?void 0:n.id,tabIndex:b?d:-1},k),D=ae();return!b&&((s=m.unmount)==null||s)&&!((i=m.static)!=null&&i)?N.createElement(At,{"aria-hidden":"true",...E}):D({ourProps:E,theirProps:m,slot:F,defaultTag:Zn,features:Qn,visible:b,name:"Tabs.Panel"})}let tr=ne(Yn),ar=ne(Kn),nr=ne(zn),rr=ne(Jn),sr=ne(er),se=Object.assign(tr,{Group:ar,List:nr,Panels:rr,Panel:sr});const ir=N.memo(function({tabs:t,defaultIndex:a=0,onTabChange:n,className:s,swipeEnabled:i=!0}){const[o,c]=l.useState(a),[d,m]=l.useState(null),h=U("spring"),f=U("fadeIn"),x=l.useRef(null),g=p=>{c(p),n?.(p),typeof window<"u"&&window.gtag&&window.gtag("event","tab_changed",{event_category:"Profile",event_label:"Tab Navigation",value:p,custom_parameters:{tab_name:t[p]?.label,total_tabs:t.length}})},v=(p,u)=>{if(!i)return;(Math.abs(u.offset.x)>50||Math.abs(u.velocity.x)>500)&&(u.offset.x>0&&o>0?g(o-1):u.offset.x<0&&o<t.length-1&&g(o+1)),m(null)},y=(p,u)=>{i&&(u.velocity.x>0?m("right"):u.velocity.x<0&&m("left"))};return t.length===0?null:r.jsxs("div",{className:w("flex h-full flex-col",s),children:[r.jsxs(se.Group,{selectedIndex:o,onChange:g,children:[r.jsx("div",{className:"pt-safe-top flex-shrink-0",children:r.jsx(se.List,{className:"m-4 flex justify-center rounded-xl bg-secondary/20 p-1",children:t.map((p,u)=>r.jsx(se,{className:({selected:b})=>w("relative flex-1 rounded-lg px-6 py-3 text-sm font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","min-h-[48pt]",b?"bg-primary text-white shadow-sm":"text-muted-foreground hover:bg-secondary/30 hover:text-foreground"),"aria-label":`Switch to ${p.label} view`,children:({selected:b})=>r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"relative z-10",children:p.label}),b&&r.jsx(T.div,{className:"absolute inset-0 rounded-lg bg-primary",layoutId:"activeTab",transition:h})]})},p.id))})}),r.jsx("div",{ref:x,className:"relative flex-1 overflow-hidden",children:r.jsx(se.Panels,{className:"h-full",children:r.jsx(ve,{mode:"wait",initial:!1,children:t.map((p,u)=>r.jsx(se.Panel,{className:w("h-full w-full focus:outline-none",u===o?"block":"hidden"),tabIndex:-1,children:r.jsx(T.div,{className:"h-full w-full",drag:i?"x":!1,dragConstraints:{left:0,right:0},dragElastic:.1,onDragStart:y,onDragEnd:v,initial:{opacity:0,x:u>o?20:u<o?-20:0},animate:{opacity:1,x:0,scale:d?.98:1},exit:{opacity:0,x:u>o?20:-20},transition:h,whileDrag:{scale:.98,rotateY:d==="left"?-2:d==="right"?2:0},children:p.content})},`${p.id}-${o}`))})})})]}),i&&d&&r.jsx(T.div,{className:"pointer-events-none absolute bottom-4 left-1/2 z-50 -translate-x-1/2 transform",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:f,children:r.jsxs("div",{className:"rounded-full bg-black/60 px-3 py-1 text-xs font-medium text-white backdrop-blur-sm",children:[d==="left"&&o<t.length-1&&"Swipe to next →",d==="right"&&o>0&&"← Swipe to previous"]})})]})}),or=(e,t)=>[{id:"avatar",label:"Avatar",content:e},{id:"photo",label:"Photo",content:t}],_t=Yt,Rt=Xt,Be=l.forwardRef(({className:e,children:t,...a},n)=>r.jsxs(nt,{ref:n,className:w("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(Jt,{asChild:!0,children:r.jsx(ut,{className:"h-4 w-4 opacity-50"})})]}));Be.displayName=nt.displayName;const Ht=l.forwardRef(({className:e,...t},a)=>r.jsx(it,{ref:a,className:w("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(pa,{className:"h-4 w-4"})}));Ht.displayName=it.displayName;const Ot=l.forwardRef(({className:e,...t},a)=>r.jsx(ot,{ref:a,className:w("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(ut,{className:"h-4 w-4"})}));Ot.displayName=ot.displayName;const Ue=l.forwardRef(({className:e,children:t,position:a="popper",...n},s)=>r.jsx(Zt,{children:r.jsxs(rt,{ref:s,className:w("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...n,children:[r.jsx(Ht,{}),r.jsx(Qt,{className:w("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(Ot,{})]})}));Ue.displayName=rt.displayName;const lr=l.forwardRef(({className:e,...t},a)=>r.jsx(lt,{ref:a,className:w("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));lr.displayName=lt.displayName;const B=l.forwardRef(({className:e,children:t,...a},n)=>r.jsxs(st,{ref:n,className:w("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(ea,{children:r.jsx(ft,{className:"h-4 w-4"})})}),r.jsx(ta,{children:t})]}));B.displayName=st.displayName;const cr=l.forwardRef(({className:e,...t},a)=>r.jsx(ct,{ref:a,className:w("-mx-1 my-1 h-px bg-muted",e),...t}));cr.displayName=ct.displayName;const dr={dexa:"DEXA Scan",scale:"Smart Scale",calipers:"Calipers",visual:"Visual Estimate",healthkit:"HealthKit"};function ur({open:e,onOpenChange:t,onSave:a,units:n}){const[s,i]=l.useState(""),[o,c]=l.useState([15]),[d,m]=l.useState("scale"),[h,f]=l.useState(!1),x=dt(),g=()=>{const p=parseFloat(s);isNaN(p)||p<=0||(a({weight:p,bodyFatPercentage:o[0],method:d,date:new Date}),i(""),c([15]),m("scale"),t(!1))},v=()=>{i(""),c([15]),m("scale"),t(!1)},y=async()=>{if(!(!be()||!x.isAvailable)){f(!0);try{if(!x.isAuthorized&&!await x.requestPermissions()){console.warn("HealthKit permissions not granted");return}const p=await x.getHealthData();if(p&&p.weight){let u=p.weight;n==="imperial"&&(u=Math.round(p.weight*2.20462*10)/10),a({weight:p.weight,bodyFatPercentage:o[0],method:"healthkit",date:new Date}),i(""),c([15]),m("scale"),t(!1),console.log("HealthKit data imported:",u,n==="imperial"?"lbs":"kg")}else console.warn("No weight data found in HealthKit")}catch(p){console.error("Error importing HealthKit data:",p)}finally{f(!1)}}};return r.jsx(da,{open:e,onOpenChange:v,children:r.jsxs(ua,{className:"max-w-md border-border bg-background text-foreground",children:[r.jsx(fa,{children:r.jsx(ma,{className:"text-xl font-semibold tracking-tight text-foreground",children:"Log New Measurement"})}),r.jsxs("div",{className:"space-y-6 py-4",children:[be()&&x.isAvailable&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(G,{className:"text-sm font-medium uppercase tracking-wide text-muted-foreground",children:"Import from HealthKit"}),r.jsx(H,{type:"button",variant:"outline",onClick:y,disabled:h,className:"h-12 w-full border-border bg-secondary text-foreground hover:bg-muted",children:h?r.jsxs(r.Fragment,{children:[r.jsx(ga,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing from HealthKit..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ba,{className:"mr-2 h-4 w-4"}),"Import from HealthKit"]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t border-border"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or enter manually"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(G,{htmlFor:"weight",className:"text-sm font-medium uppercase tracking-wide text-muted-foreground",children:["Weight (",n==="metric"?"kg":"lbs",")"]}),r.jsx(Fe,{id:"weight",type:"number",placeholder:"Enter weight",value:s,onChange:p=>i(p.target.value),className:"h-12 border-border bg-secondary text-base text-foreground placeholder:text-muted-foreground"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs(G,{className:"text-sm font-medium uppercase tracking-wide text-muted-foreground",children:["Body Fat: ",o[0].toFixed(1),"%"]}),r.jsx(Me,{value:o,onValueChange:c,max:50,min:3,step:.1,className:"w-full"}),r.jsxs("div",{className:"flex justify-between text-xs font-medium text-muted-foreground",children:[r.jsx("span",{children:"3%"}),r.jsx("span",{children:"50%"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(G,{className:"text-sm font-medium uppercase tracking-wide text-muted-foreground",children:"Method"}),r.jsxs(_t,{value:d,onValueChange:p=>m(p),children:[r.jsx(Be,{className:"h-12 border-border bg-secondary text-foreground",children:r.jsx(Rt,{})}),r.jsx(Ue,{className:"border-border bg-background",children:Object.entries(dr).filter(([p])=>p!=="healthkit").map(([p,u])=>r.jsx(B,{value:p,className:"text-foreground hover:bg-muted",children:u},p))})]})]})]}),r.jsx("div",{className:"pt-4",children:r.jsx(H,{onClick:g,className:"h-12 w-full bg-primary text-base font-semibold text-primary-foreground hover:bg-primary/90",disabled:!s||parseFloat(s)<=0,children:"Save Measurement"})})]})})}const Wt=l.createContext(null);function fr({children:e,totalSteps:t,initialStep:a=0,onStepChange:n,onComplete:s}){const[i,o]=l.useState(a),[c,d]=l.useState(!1),m=na.isNativePlatform(),h=i===0,f=i===t-1,x=(i+1)/t*100,g=l.useCallback(async()=>{if(c)if(m&&await je.impact({style:Ne.Light}),f)s?.();else{const u=i+1;o(u),d(!1),n?.(u)}},[i,f,c,s,n,m]),v=l.useCallback(async()=>{if(h)return;m&&await je.impact({style:Ne.Light});const u=i-1;o(u),d(!0),n?.(u)},[i,h,n,m]),y=l.useCallback(async u=>{u<0||u>=t||u===i||(m&&await je.impact({style:Ne.Light}),o(u),d(!0),n?.(u))},[i,t,n,m]),p={currentStep:i,totalSteps:t,isFirstStep:h,isLastStep:f,progress:x,goNext:g,goBack:v,goToStep:y,canGoNext:c,setCanGoNext:d};return r.jsx(Wt.Provider,{value:p,children:e})}function mr(){const e=l.useContext(Wt);if(!e)throw new Error("useStepper must be used within a StepperProvider");return e}class hr{startTime=null;stepStartTimes={};backNavigationCount=0;usedHealthKit=!1;usedPresets=!1;startFlow(t){this.startTime=Date.now(),this.stepStartTimes={},this.backNavigationCount=0,this.usedHealthKit=!1,this.usedPresets=!1,this.track("log_weight_started",t)}completeStep(t){const a=this.stepStartTimes[t.step_number],n=a?(Date.now()-a)/1e3:0;this.track("step_completed",{...t,time_spent_seconds:Math.round(n*10)/10}),t.interaction_type==="preset"&&(this.usedPresets=!0),t.interaction_type==="healthkit"&&(this.usedHealthKit=!0)}startStep(t){this.stepStartTimes[t]=Date.now()}navigateBack(){this.backNavigationCount++}trackWeightInput(t){this.track("weight_input_method",t)}trackBodyFatInput(t){this.track("body_fat_input_method",t)}trackSave(t){const a=this.startTime?(Date.now()-this.startTime)/1e3:0;this.track("measurement_saved",{...t,total_flow_time_seconds:Math.round(a*10)/10,steps_back_navigated:this.backNavigationCount,used_healthkit:this.usedHealthKit,used_presets:this.usedPresets})}completeFlow(t){console.log("[Analytics] Flow completed:",t)}trackValidationError(t){this.track("validation_error",t)}trackAccessibility(t){this.track("accessibility_interaction",t)}track(t,a){console.log(`[Analytics] ${t}:`,a)}}const Ce=new hr,Gr={getInteractionType:e=>e.type==="keydown"||e.type==="keyup"?"keyboard":"tap",getPrecision:e=>{const t=e.toString(),a=t.indexOf(".");return a===-1?0:t.length-a-1},wasSnappedToIncrement:(e,t,a)=>{const n=Math.round(e/a)*a;return Math.abs(t-n)<.001}},pr=N.lazy(()=>ce(()=>import("./WeightStep-fLntRKjE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(e=>({default:e.WeightStep}))),gr=N.lazy(()=>ce(()=>import("./BodyFatStep-DFKFuOds.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(e=>({default:e.BodyFatStep}))),br=N.lazy(()=>ce(()=>import("./MethodStep-DfX6ZUsU.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(e=>({default:e.MethodStep}))),xr=N.lazy(()=>ce(()=>import("./ReviewStep-B5uK_Raa.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(e=>({default:e.ReviewStep})));function vr({onComplete:e,onCancel:t,initialData:a,weightData:n,setWeightData:s,bodyFatData:i,setBodyFatData:o,methodData:c,setMethodData:d,photoData:m,setPhotoData:h}){const{currentStep:f,canGoNext:x,goNext:g,goBack:v,goToStep:y,progress:p}=mr(),u=4,b=["Weight","Body Fat","Method","Review"],j=E=>{y(E)},k=async()=>{try{const E=document.createElement("input");E.type="file",E.accept="image/*",E.capture="user",E.onchange=async D=>{const I=D.target.files?.[0];if(!I)return;if(I.size>5*1024*1024){pe({title:"File too large",description:"Please select an image under 5MB",variant:"destructive"});return}const A=new FileReader;A.onload=()=>{const $=A.result;h($),Ce.trackPhotoAdded({file_size_kb:Math.round(I.size/1024),file_type:I.type}),pe({title:"Photo added",description:"Your progress photo has been attached"})},A.onerror=()=>{pe({title:"Error",description:"Failed to process photo",variant:"destructive"})},A.readAsDataURL(I)},E.click()}catch(E){console.error("Error capturing photo:",E),pe({title:"Error",description:"Failed to capture photo",variant:"destructive"})}},F=()=>{switch(f){case 0:return r.jsx(pr,{value:n,onChange:s});case 1:return r.jsx(gr,{value:i,onChange:o});case 2:return r.jsx(br,{value:c,onChange:d});case 3:return r.jsx(xr,{weight:n,bodyFat:i,method:c,onEditStep:j,onAddPhoto:k,photoData:m});default:return null}};return r.jsxs("div",{className:"flex h-full flex-col bg-background",children:[r.jsxs("div",{className:"pt-safe-top flex-shrink-0 px-6",children:[r.jsxs("div",{className:"flex h-14 items-center justify-between",children:[r.jsx("button",{onClick:f===0?t:v,className:"flex h-10 w-10 items-center justify-center rounded-full bg-secondary/20 transition-colors hover:bg-secondary/30","aria-label":f===0?"Cancel":"Go back",children:r.jsx(xa,{className:"h-5 w-5 text-foreground"})}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:["Step ",f+1," of ",u]}),r.jsx("div",{className:"text-lg font-semibold text-foreground",children:b[f]})]}),r.jsx("div",{className:"flex h-10 w-10 items-center justify-center",children:r.jsxs("div",{className:"text-sm font-medium text-muted-foreground",children:[Math.round(p),"%"]})})]}),r.jsx("div",{className:"mb-6 mt-4",children:r.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-secondary/20",children:r.jsx(T.div,{className:"h-full rounded-full bg-primary",initial:{width:0},animate:{width:`${p}%`},transition:{duration:.3,ease:"easeOut"}})})})]}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx("div",{className:"pb-safe-bottom h-full overflow-y-auto px-6",children:r.jsx(N.Suspense,{fallback:r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})}),children:r.jsx(ve,{mode:"wait",children:r.jsx(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.25,type:"spring",damping:20},className:"h-full",children:F()},f)})})})}),r.jsx("div",{className:"flex-shrink-0 px-6 pb-6 pt-4",children:r.jsxs("div",{className:"flex gap-3",children:[f>0&&r.jsx(T.button,{onClick:v,className:"h-14 flex-1 rounded-2xl bg-secondary/20 font-semibold text-foreground transition-colors hover:bg-secondary/30",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:"Back"}),r.jsx(T.button,{onClick:g,disabled:!x,className:w("flex h-14 items-center justify-center gap-2 rounded-2xl font-semibold transition-all duration-200",f===0?"flex-1":"flex-[2]",x?"bg-primary text-primary-foreground hover:bg-primary/90":"cursor-not-allowed bg-secondary/20 text-muted-foreground"),whileTap:x?{scale:.98}:{},children:f===u-1?r.jsxs(r.Fragment,{children:[r.jsx(ft,{className:"h-5 w-5"}),"Save Entry"]}):r.jsxs(r.Fragment,{children:["Next",r.jsx(va,{className:"h-5 w-5"})]})})]})})]})}function yr(e){const[t,a]=l.useState(e.initialData?.weight||{value:0,unit:"lbs"}),[n,s]=l.useState(e.initialData?.bodyFat||{value:15}),[i,o]=l.useState(e.initialData?.method||{value:"scale",label:"Digital Scale"}),[c,d]=l.useState(),m=async()=>{Ce.completeFlow({total_steps:4,completion_time_seconds:Date.now()-Ce.startTime,final_weight:`${t.value} ${t.unit}`,final_body_fat:`${n.value}%`,final_method:i.label,had_photo:!!c}),e.onComplete({weight:t,bodyFat:n,method:i,photo:c})};return r.jsx(fr,{totalSteps:4,initialStep:0,onComplete:m,children:r.jsx(vr,{...e,weightData:t,setWeightData:a,bodyFatData:n,setBodyFatData:s,methodData:i,setMethodData:o,photoData:c,setPhotoData:d})})}function wr({show:e,onClose:t,onSave:a,units:n,initialWeight:s,initialBodyFat:i}){const o=d=>{a({weight:d.weight.value,bodyFatPercentage:d.bodyFat.value,method:{value:d.method.value,label:d.method.label},date:new Date}),t()},c={weight:s?{value:s,unit:n==="imperial"?"lbs":"kg"}:void 0,bodyFat:i?{value:i}:void 0,method:void 0};return r.jsx(ve,{children:e&&r.jsx(T.div,{className:"fixed inset-0 z-50 bg-background",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:r.jsx(yr,{onComplete:o,onCancel:t,initialData:c})})})}const jr=N.memo(function({onComplete:t,units:a,className:n}){const[s,i]=l.useState(""),[o,c]=l.useState(""),[d,m]=l.useState("scale"),[h,f]=l.useState(!1),[x,g]=l.useState({}),v=()=>{const b={},j=parseFloat(s),k=parseFloat(o);return!s||isNaN(j)||j<=0?b.weight="Please enter a valid weight":a==="imperial"&&(j<50||j>1e3)?b.weight="Weight must be between 50-1000 lbs":a==="metric"&&(j<20||j>500)&&(b.weight="Weight must be between 20-500 kg"),(!o||isNaN(k)||k<1||k>60)&&(b.bodyFat="Body fat must be between 1-60%"),g(b),Object.keys(b).length===0},y=async b=>{if(b.preventDefault(),!!v()){f(!0);try{t({weight:parseFloat(s),bodyFatPercentage:parseFloat(o),method:d,date:new Date})}catch(j){console.error("Error saving initial weight:",j)}finally{f(!1)}}},p=a==="imperial"?"lbs":"kg",u=a==="imperial"?"e.g., 150":"e.g., 70";return r.jsx("div",{className:w("mx-auto w-full max-w-2xl",n),children:r.jsxs(ra,{className:"border-border bg-background",children:[r.jsxs(sa,{className:"pb-6 text-center",children:[r.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:r.jsx(Ke,{className:"h-8 w-8 text-primary"})}),r.jsx(ia,{className:"text-2xl font-bold text-foreground",children:"Let's get started!"}),r.jsx(oa,{className:"mx-auto max-w-md text-base text-muted-foreground",children:"To begin tracking your body composition journey, we need your current measurements"})]}),r.jsxs(la,{children:[r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(G,{htmlFor:"weight",className:"flex items-center gap-2 text-base font-medium",children:[r.jsx(Ke,{className:"h-4 w-4 text-primary"}),"Current Weight (",p,")"]}),r.jsx(Fe,{id:"weight",type:"number",value:s,onChange:b=>i(b.target.value),placeholder:u,className:w("h-12 text-lg",x.weight&&"border-destructive focus:border-destructive"),min:a==="imperial"?"50":"20",max:a==="imperial"?"1000":"500",step:"0.1",autoFocus:!0}),x.weight&&r.jsx("p",{className:"text-sm text-destructive",children:x.weight})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(G,{htmlFor:"bodyFat",className:"flex items-center gap-2 text-base font-medium",children:[r.jsx(ya,{className:"h-4 w-4 text-primary"}),"Body Fat Percentage"]}),r.jsxs("div",{className:"relative",children:[r.jsx(Fe,{id:"bodyFat",type:"number",value:o,onChange:b=>c(b.target.value),placeholder:"e.g., 15",className:w("h-12 pr-12 text-lg",x.bodyFat&&"border-destructive focus:border-destructive"),min:"1",max:"60",step:"0.1"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 transform text-muted-foreground",children:"%"})]}),x.bodyFat&&r.jsx("p",{className:"text-sm text-destructive",children:x.bodyFat}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Don't know your body fat? Start with an estimate - you can update it later"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(G,{htmlFor:"method",className:"flex items-center gap-2 text-base font-medium",children:[r.jsx(wa,{className:"h-4 w-4 text-primary"}),"Measurement Method"]}),r.jsxs(_t,{value:d,onValueChange:m,children:[r.jsx(Be,{className:"h-12 text-lg",children:r.jsx(Rt,{})}),r.jsxs(Ue,{children:[r.jsx(B,{value:"scale",children:"Smart Scale"}),r.jsx(B,{value:"dexa",children:"DEXA Scan"}),r.jsx(B,{value:"bodpod",children:"Bod Pod"}),r.jsx(B,{value:"calipers",children:"Body Fat Calipers"}),r.jsx(B,{value:"visual",children:"Visual Estimate"}),r.jsx(B,{value:"other",children:"Other"})]})]})]}),r.jsx(H,{type:"submit",className:"h-12 w-full text-base font-semibold",disabled:h||!s||!o,children:h?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-r-transparent"}),"Setting up your profile..."]}):"Start Tracking"})]}),r.jsx("div",{className:"mt-6 rounded-lg bg-muted/30 p-4",children:r.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Tip:"})," Your measurements will be used to calculate FFMI and track progress over time. Don't worry about being precise - consistency is more important than accuracy."]})})]})]})})});function Ze({children:e}){return r.jsx(r.Fragment,{children:e})}const Nr=ja("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Bt=l.forwardRef(({className:e,variant:t,...a},n)=>r.jsx("div",{ref:n,role:"alert",className:w(Nr({variant:t}),e),...a}));Bt.displayName="Alert";const Er=l.forwardRef(({className:e,...t},a)=>r.jsx("h5",{ref:a,className:w("mb-1 font-medium leading-none tracking-tight",e),...t}));Er.displayName="AlertTitle";const Ut=l.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:w("text-sm [&_p]:leading-relaxed",e),...t}));Ut.displayName="AlertDescription";function Sr(){const[e,t]=l.useState(!1),[a,n]=l.useState(!1),{user:s}=ca();l.useEffect(()=>{const c=localStorage.getItem("pending_email_confirmation"),d=localStorage.getItem("email_banner_dismissed");c&&!d&&s&&!a&&t(!0)},[s,a]);const i=()=>{t(!1),n(!0),localStorage.setItem("email_banner_dismissed","true")},o=async()=>{console.log("Resending confirmation email...")};return e?r.jsxs(Bt,{className:"mb-4 border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:[r.jsx(Na,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),r.jsxs(Ut,{className:"flex w-full items-center justify-between",children:[r.jsx("div",{className:"flex-1",children:r.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Please check your email and click the confirmation link to fully activate your account."})}),r.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[r.jsx(H,{variant:"outline",size:"sm",onClick:o,className:"h-8 border-blue-300 text-xs text-blue-700 hover:bg-blue-100 dark:border-blue-700 dark:text-blue-300 dark:hover:bg-blue-900",children:"Resend"}),r.jsx(H,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0 text-blue-600 hover:bg-blue-100 dark:text-blue-400 dark:hover:bg-blue-900",children:r.jsx(Ea,{className:"h-4 w-4"})})]})]})]}):null}const $r={id:"1",name:"John Doe",email:"john@example.com",gender:"male",birthday:new Date("1990-01-15"),height:180},kr=[{id:"1",userId:"1",date:new Date("2024-01-01"),weight:80,bodyFatPercentage:15,method:"dexa"},{id:"2",userId:"1",date:new Date("2024-01-15"),weight:79.5,bodyFatPercentage:14.5,method:"scale"},{id:"3",userId:"1",date:new Date("2024-02-01"),weight:79,bodyFatPercentage:14,method:"calipers"},{id:"4",userId:"1",date:new Date("2024-02-15"),weight:78.5,bodyFatPercentage:13.5,method:"scale"}],Fr={userId:"1",units:"imperial",healthKitSyncEnabled:!1,googleFitSyncEnabled:!1};function Tr(e){return e/2.20462}function ke(e){return e*2.20462}function Qe(e){const t=e/2.54,a=Math.floor(t/12),n=Math.round(t%12);return`${a}'${n}"`}function Pr(e){return e/2.54}function Dr(e,t){return!e||e<=0||isNaN(e)?0:!t||t<0||t>100||isNaN(t)?e:e*(1-t/100)}function Lr(e,t){if(!e||e<=0||isNaN(e)||!t||t<=0||isNaN(t))return 0;const a=t/100,n=e/(a*a);return isNaN(n)||!isFinite(n)?0:n}function Ir(){const[e,t]=l.useState($r),[a,n]=l.useState(kr),[s,i]=l.useState(a.length-1),[o,c]=l.useState(Fr),d=l.useMemo(()=>[...a].sort((u,b)=>u.date.getTime()-b.date.getTime()),[a]),m=l.useMemo(()=>{const u=d[s];if(!u)return{bodyFatPercentage:0,weight:0,ffmi:0,leanBodyMass:0,date:new Date};const b=Dr(u.weight,u.bodyFatPercentage),j=Lr(b,e.height);return{bodyFatPercentage:u.bodyFatPercentage,weight:u.weight,ffmi:Math.round(j*10)/10,leanBodyMass:Math.round(b*10)/10,date:u.date}},[d,s,e.height]),h=l.useCallback(u=>{const b={...u,id:Date.now().toString(),userId:e.id};n(j=>[...j,b]),i(d.length)},[e.id,d.length]),f=l.useCallback(u=>{console.log("User updates:",u),t(b=>({...b,...u}))},[]),x=l.useCallback(u=>{c(b=>({...b,...u}))},[]),g=l.useCallback(u=>{if(!u||u<=0||isNaN(u))return o.units==="metric"?"0 kg":"0 lbs";if(o.units==="metric")return`${Math.round(u*10)/10} kg`;{const b=ke(u);return`${Math.round(b*10)/10} lbs`}},[o.units]),v=l.useCallback(u=>o.units==="metric"?`${u} cm`:Qe(u),[o.units]),y=l.useCallback(u=>{if(!u||u<=0||isNaN(u))return o.units==="metric"?"0 kg":"0 lbs";if(o.units==="metric")return`${Math.round(u*10)/10} kg`;{const b=ke(u);return`${Math.round(b*10)/10} lbs`}},[o.units]),p=l.useCallback(()=>{const u=new Date,b=new Date(e.birthday);let j=u.getFullYear()-b.getFullYear();const k=u.getMonth()-b.getMonth();return(k<0||k===0&&u.getDate()<b.getDate())&&j--,j},[e.birthday]);return{user:e,metrics:d,currentMetrics:m,selectedDateIndex:s,setSelectedDateIndex:i,addMetric:h,updateUser:f,getUserAge:p,settings:o,updateSettings:x,getFormattedWeight:g,getFormattedHeight:v,getFormattedLeanBodyMass:y,utils:{lbsToKg:Tr,kgToLbs:ke,cmToFeet:Qe,cmToInches:Pr}}}function et(e){if(!e)return 30;const t=new Date(e),a=new Date;let n=a.getFullYear()-t.getFullYear();const s=a.getMonth()-t.getMonth();return(s<0||s===0&&a.getDate()<t.getDate())&&n--,Math.max(18,Math.min(65,n))}N.lazy(()=>ce(()=>import("./AvatarSilhouette-DtKnYoO6.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,9,10,11,12,13])).then(e=>({default:e.AvatarSilhouette})));const tt=()=>r.jsx("div",{className:"flex h-full min-h-[400px] items-center justify-center bg-muted/30 md:min-h-0",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading 3D avatar..."})]})}),Ar=()=>{console.log("Dashboard: Component rendering");const e=aa(),t=ha();Ir();const a=dt(),{user:n,metrics:s,currentMetrics:i,selectedDateIndex:o,setSelectedDateIndex:c,addMetric:d,getUserAge:m,getFormattedWeight:h,getFormattedHeight:f,getFormattedLeanBodyMass:x,settings:g,utils:v}=t,y=t.loading,[p,u]=l.useState(0),[b,j]=l.useState(!1),[k,F]=l.useState(!1),[E,D]=l.useState(!1),[I,A]=l.useState(null),[$,C]=l.useState(!1),W=M=>{u(M)},ye=l.useCallback(()=>{o<s.length-1?c(o+1):e("/settings")},[o,s.length,c,e]),fe=l.useCallback(()=>{o>0&&c(o-1)},[o,c]);ka({onSwipeLeft:ye,onSwipeRight:fe,threshold:100}),N.useEffect(()=>{if(!$)if(be()&&a.isAvailable){(async()=>{try{if(a.isAuthorized||await a.requestPermissions(),a.isAuthorized){const P=await a.getHealthData();P&&P.weight&&(A(P),console.log("HealthKit weight data found:",P.weight))}}catch(P){console.warn("Error checking HealthKit data:",P)}finally{C(!0)}})();const S=setTimeout(()=>{$||(console.warn("HealthKit check timed out, proceeding without HealthKit data"),C(!0))},3e3);return()=>clearTimeout(S)}else C(!0)},[$]);const re=M=>{let S=M.weight;g.units==="imperial"&&(S=v.lbsToKg(M.weight)),d({...M,weight:S})},me=s.length>0&&s.some(M=>M.weight>0),we=I&&I.weight>0,K=me||we;return N.useEffect(()=>{!y&&n&&g&&$&&!K&&!E&&D(!0)},[y,n,g,$,K,E]),y||!n||!g?r.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading your data..."})]})}):E&&!K?r.jsx(Ze,{children:r.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-6",children:r.jsx(jr,{onComplete:M=>{re(M),D(!1)},units:g.units})})}):r.jsx(Ze,{children:r.jsxs("div",{className:"flex h-screen flex-col overflow-hidden bg-background text-foreground md:min-h-screen md:overflow-auto",children:[r.jsx("div",{className:"px-4 pt-4 md:px-6",children:r.jsx(Sr,{})}),r.jsxs("div",{className:"hidden items-center justify-between border-b border-border px-6 py-4 md:flex",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"LogYourBody"}),r.jsx($a,{})]}),r.jsxs("div",{className:"flex gap-3",children:[be()&&r.jsx(H,{size:"icon",variant:"outline",onClick:()=>e("/healthkit-test"),className:"border-border bg-secondary text-foreground hover:bg-muted",title:"HealthKit Testing (Development)",children:r.jsx(Sa,{className:"h-4 w-4"})}),r.jsx(H,{size:"icon",variant:"outline",onClick:()=>{K?F(!0):D(!0)},className:"h-10 w-10 border-border bg-secondary text-foreground hover:bg-muted",children:r.jsx(Ge,{className:"h-4 w-4"})}),r.jsx(H,{size:"icon",variant:"outline",onClick:()=>e("/settings"),className:"h-10 w-10 border-border bg-secondary text-foreground hover:bg-muted",children:r.jsx(ze,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex min-h-0 flex-1 flex-col md:flex-row",children:[r.jsxs("div",{className:"relative min-h-0 flex-[1.5] md:flex-1 md:w-2/3",children:[r.jsx(ir,{tabs:or(r.jsx(l.Suspense,{fallback:r.jsx(tt,{}),children:r.jsx(Ye,{gender:n.gender,bodyFatPercentage:i.bodyFatPercentage,showPhoto:!1,className:"h-full w-full",weight:i.weight,height:n.height,age:et(n.birthday)})}),r.jsx(l.Suspense,{fallback:r.jsx(tt,{}),children:r.jsx(Ye,{gender:n.gender,bodyFatPercentage:i.bodyFatPercentage,showPhoto:!0,profileImage:n.profileImage,className:"h-full w-full",weight:i.weight,height:n.height,age:et(n.birthday)})})),defaultIndex:p,onTabChange:W,swipeEnabled:!0,className:"h-full w-full"}),r.jsxs("div",{className:"top-safe-top absolute right-4 z-20 flex gap-3 md:hidden",children:[r.jsx(H,{size:"icon",variant:"outline",onClick:()=>{K?F(!0):D(!0)},className:"h-10 w-10 border-border bg-background/80 text-foreground shadow-lg backdrop-blur-sm hover:bg-muted",children:r.jsx(Ge,{className:"h-4 w-4"})}),r.jsx(H,{size:"icon",variant:"outline",onClick:()=>e("/settings"),className:"h-10 w-10 border-border bg-background/80 text-foreground shadow-lg backdrop-blur-sm hover:bg-muted",children:r.jsx(ze,{className:"h-4 w-4"})})]})]}),r.jsx("div",{className:"min-h-0 flex-[0.8] border-border md:w-1/3 md:flex-1 md:border-l",children:r.jsx(Aa,{metrics:i,user:n,userAge:m(),formattedWeight:h(i.weight),formattedHeight:f(n.height),formattedLeanBodyMass:x(i.leanBodyMass)})})]}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Ca,{metrics:s,selectedIndex:o,onIndexChange:c})}),r.jsx(ur,{open:b,onOpenChange:j,onSave:re,units:g.units}),r.jsx(wr,{show:k,onSave:re,onClose:()=>F(!1),units:g.units,initialWeight:i.weight>0?g.units==="imperial"?v.kgToLbs(i.weight):i.weight:void 0,initialBodyFat:i.bodyFatPercentage})]})})},zr=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"}));export{zr as D,qe as L,Gr as a,mr as u,Ce as w};
