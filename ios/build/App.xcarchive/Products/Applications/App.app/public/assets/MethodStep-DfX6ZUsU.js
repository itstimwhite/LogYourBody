import{j as e}from"./ui-vendor-QE-oobKj.js";import{a as n}from"./react-vendor-ClhmtWht.js";import{f as g,m as r,g as s,H as b,I as j}from"./index-D69SCsvj.js";import{u as N,w as m}from"./Dashboard-CYl8L0Kz.js";import{m as S}from"./weight-logging-BIZ1MV3J.js";import{S as w,$ as E,R as C,o as H,a0 as M,a1 as D,e as I,w as T}from"./utils-vendor-BycXaddh.js";import"./data-vendor-DLfSSb0Z.js";import"./analytics-vendor-CXgENQ1a.js";import"./use-supabase-body-metrics-BQLJwBg7.js";import"./input-8QVqFKxr.js";import"./label-DZft6xYU.js";import"./VersionDisplay-BxpSyFxf.js";import"./use-swipe-navigation-eIglpj1B.js";const d=[{value:"scale",label:"Digital Scale",icon:w,description:"Home or gym scale"},{value:"dexa",label:"DEXA Scan",icon:E,description:"Professional scan"},{value:"calipers",label:"Calipers",icon:C,description:"Skinfold measurement"},{value:"visual",label:"Visual Estimate",icon:H,description:"Mirror assessment"},{value:"bioimpedance",label:"Bio-impedance",icon:M,description:"Smart scale/device"},{value:"other",label:"Other",icon:D,description:"Different method"}];function F({value:p,onChange:l}){const{setCanGoNext:c,goNext:u}=N(),[o,x]=n.useState(p.value),[k,y]=n.useState(!1),h=g.isNativePlatform();n.useEffect(()=>{m.startStep(3)},[]),n.useEffect(()=>{if(o){const t=d.find(a=>a.value===o);if(t){const a={value:t.value,label:t.label};try{S.parse(a),l(a),c(!0)}catch{c(!1)}}}},[o,l,c]);const f=async t=>{h&&await b.impact({style:j.Medium}),x(t),y(!0),m.completeStep({step_number:3,step_name:"method",interaction_type:"tap",value:t}),setTimeout(()=>{u()},300)};return e.jsxs(r.div,{className:"space-y-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.25,type:"spring",damping:20},children:[e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx(r.div,{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-3xl bg-primary/10",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(I,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-foreground",children:"How did you measure?"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Select your measurement method"})]})]}),e.jsx(r.div,{className:"grid grid-cols-2 gap-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.25},children:d.map((t,a)=>{const v=t.icon,i=o===t.value;return e.jsxs(r.button,{onClick:()=>f(t.value),className:s("relative rounded-2xl border-2 p-6 transition-all duration-200","flex flex-col items-center gap-3 text-center","min-h-[120px] focus:outline-hidden focus:ring-4 focus:ring-primary/20",i?"border-primary bg-primary text-primary-foreground":"border-transparent bg-secondary/20 text-foreground hover:border-border hover:bg-secondary/30"),whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05,duration:.25},"aria-label":`Select ${t.label} measurement method`,children:[i&&e.jsx(r.div,{className:"absolute right-2 top-2",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1,duration:.2},children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("div",{className:s("flex h-12 w-12 items-center justify-center rounded-2xl",i?"bg-primary-foreground/20":"bg-primary/10"),children:e.jsx(v,{className:s("h-6 w-6",i?"text-primary-foreground":"text-primary")})}),e.jsxs("div",{children:[e.jsx("div",{className:s("mb-1 text-sm font-semibold",i?"text-primary-foreground":"text-foreground"),children:t.label}),e.jsx("div",{className:s("text-xs opacity-80",i?"text-primary-foreground":"text-muted-foreground"),children:t.description})]})]},t.value)})}),e.jsxs(r.div,{className:"text-center text-sm text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.25},children:[e.jsx("p",{children:"Tap to select your measurement method"}),e.jsx("p",{className:"mt-1 opacity-75",children:"Different methods may have varying accuracy"})]})]})}export{F as MethodStep};
