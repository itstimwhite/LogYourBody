const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WeightStep-kS1QrtDI.js","assets/ui-vendor-BTNJdHiL.js","assets/react-vendor-CGPzL8fz.js","assets/index-BWixOZri.js","assets/data-vendor-Dz4nk24n.js","assets/utils-vendor-BD55slVq.js","assets/analytics-vendor-CXgENQ1a.js","assets/index-494-x4lR.css","assets/weight-logging-rZoVubPW.js","assets/use-is-mounted-Dtnm4exq.js","assets/focus-management-6kc7Qb5h.js","assets/input-CkE6ZwYN.js","assets/label-DJ6QZZke.js","assets/progress-DaDOMKAa.js","assets/VersionDisplay-BrEkyV1W.js","assets/prefetch-BKo02pYs.js","assets/use-supabase-body-metrics-D-84L7_Y.js","assets/use-swipe-navigation-Br04oNeb.js","assets/BodyFatStep-CqDuS-OZ.js","assets/MethodStep-eQI9pxgq.js","assets/radio-group-BXTCuRDb.js","assets/bugs-2q_Jw5H1.js","assets/ReviewStep-Dk29UFHv.js","assets/AvatarSilhouette-Cs_LniZT.js"])))=>i.map(i=>d[i]);
import{_ as Q}from"./data-vendor-Dz4nk24n.js";import{j as e}from"./ui-vendor-BTNJdHiL.js";import{a as o,R as S,u as rt}from"./react-vendor-CGPzL8fz.js";import{m as D,c as j,A as ye,o as Ue,D as we,p as je,q as nt,t as it,j as le,B as _,h as lt,H as he,I as me,s as xe,g as Re,v as ot,S as ct,w as dt,R as ut,x as Ce,C as ht,b as mt,d as gt,e as ft,f as xt}from"./index-BWixOZri.js";import{f as pt,w as bt,e as vt,S as Be}from"./use-is-mounted-Dtnm4exq.js";import{f as He,d as yt,K as ee,y as te,n as oe,a as O,$ as We,q as wt,_ as Ke,L as ae,s as ne,O as Ie,u as Z,t as jt,j as $,k as z,l as L,r as ie,b as Nt,P as X}from"./focus-management-6kc7Qb5h.js";import{I as pe}from"./input-CkE6ZwYN.js";import{L as V}from"./label-DJ6QZZke.js";import{S as Oe,a as Ve,b as ze,c as Ge,d as K,P as St}from"./progress-DaDOMKAa.js";import{L as kt,d as Pt,s as Ft,u as Ct,m as Ye,S as be,v as It,g as Dt,a as Tt,w as _t,X as qe,b as Et,x as Mt,H as At,P as De,y as Te}from"./utils-vendor-BD55slVq.js";import{V as $t}from"./VersionDisplay-BrEkyV1W.js";import{p as G}from"./prefetch-BKo02pYs.js";import{u as Lt}from"./use-supabase-body-metrics-D-84L7_Y.js";import{u as Ut}from"./use-swipe-navigation-Br04oNeb.js";function Rt({onFocus:a}){let[t,s]=o.useState(!0),r=pt();return t?S.createElement(He,{as:"button",type:"button",features:yt.Focusable,onFocus:l=>{l.preventDefault();let i,n=50;function c(){if(n--<=0){i&&cancelAnimationFrame(i);return}if(a()){if(cancelAnimationFrame(i),!r.current)return;s(!1);return}i=requestAnimationFrame(c)}i=requestAnimationFrame(c)}}):null}const Je=o.createContext(null);function Bt(){return{groups:new Map,get(a,t){var s;let r=this.groups.get(a);r||(r=new Map,this.groups.set(a,r));let l=(s=r.get(t))!=null?s:0;r.set(t,l+1);let i=Array.from(r.keys()).indexOf(t);function n(){let c=r.get(t);c>1?r.set(t,c-1):r.delete(t)}return[i,n]}}}function Ht({children:a}){let t=o.useRef(Bt());return o.createElement(Je.Provider,{value:t},a)}function Xe(a){let t=o.useContext(Je);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let s=o.useId(),[r,l]=t.current.get(a,s);return o.useEffect(()=>l,[]),r}var Wt=(a=>(a[a.Forwards=0]="Forwards",a[a.Backwards=1]="Backwards",a))(Wt||{}),Kt=(a=>(a[a.Less=-1]="Less",a[a.Equal=0]="Equal",a[a.Greater=1]="Greater",a))(Kt||{}),Ot=(a=>(a[a.SetSelectedIndex=0]="SetSelectedIndex",a[a.RegisterTab=1]="RegisterTab",a[a.UnregisterTab=2]="UnregisterTab",a[a.RegisterPanel=3]="RegisterPanel",a[a.UnregisterPanel=4]="UnregisterPanel",a))(Ot||{});let Vt={0(a,t){var s;let r=X(a.tabs,u=>u.current),l=X(a.panels,u=>u.current),i=r.filter(u=>{var x;return!((x=u.current)!=null&&x.hasAttribute("disabled"))}),n={...a,tabs:r,panels:l};if(t.index<0||t.index>r.length-1){let u=Z(Math.sign(t.index-a.selectedIndex),{[-1]:()=>1,0:()=>Z(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(i.length===0)return n;let x=Z(u,{0:()=>r.indexOf(i[0]),1:()=>r.indexOf(i[i.length-1])});return{...n,selectedIndex:x===-1?a.selectedIndex:x}}let c=r.slice(0,t.index),h=[...r.slice(t.index),...c].find(u=>i.includes(u));if(!h)return n;let m=(s=r.indexOf(h))!=null?s:a.selectedIndex;return m===-1&&(m=a.selectedIndex),{...n,selectedIndex:m}},1(a,t){if(a.tabs.includes(t.tab))return a;let s=a.tabs[a.selectedIndex],r=X([...a.tabs,t.tab],i=>i.current),l=a.selectedIndex;return a.info.current.isControlled||(l=r.indexOf(s),l===-1&&(l=a.selectedIndex)),{...a,tabs:r,selectedIndex:l}},2(a,t){return{...a,tabs:a.tabs.filter(s=>s!==t.tab)}},3(a,t){return a.panels.includes(t.panel)?a:{...a,panels:X([...a.panels,t.panel],s=>s.current)}},4(a,t){return{...a,panels:a.panels.filter(s=>s!==t.panel)}}},Ne=o.createContext(null);Ne.displayName="TabsDataContext";function Y(a){let t=o.useContext(Ne);if(t===null){let s=new Error(`<${a} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Y),s}return t}let Se=o.createContext(null);Se.displayName="TabsActionsContext";function ke(a){let t=o.useContext(Se);if(t===null){let s=new Error(`<${a} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,ke),s}return t}function zt(a,t){return Z(t.type,Vt,a,t)}let Gt="div";function Yt(a,t){let{defaultIndex:s=0,vertical:r=!1,manual:l=!1,onChange:i,selectedIndex:n=null,...c}=a;const h=r?"vertical":"horizontal",m=l?"manual":"auto";let u=n!==null,x=ne({isControlled:u}),b=te(t),[p,v]=o.useReducer(zt,{info:x,selectedIndex:n??s,tabs:[],panels:[]}),w=o.useMemo(()=>({selectedIndex:p.selectedIndex}),[p.selectedIndex]),f=ne(i||(()=>{})),d=ne(p.tabs),g=o.useMemo(()=>({orientation:h,activation:m,...p}),[h,m,p]),y=O(P=>(v({type:1,tab:P}),()=>v({type:2,tab:P}))),k=O(P=>(v({type:3,panel:P}),()=>v({type:4,panel:P}))),F=O(P=>{I.current!==P&&f.current(P),u||v({type:0,index:P})}),I=ne(u?a.selectedIndex:p.selectedIndex),T=o.useMemo(()=>({registerTab:y,registerPanel:k,change:F}),[]);oe(()=>{v({type:0,index:n??s})},[n]),oe(()=>{if(I.current===void 0||p.tabs.length<=0)return;let P=X(p.tabs,A=>A.current);P.some((A,B)=>p.tabs[B]!==A)&&F(P.indexOf(p.tabs[I.current]))});let R={ref:b},M=ae();return S.createElement(Ht,null,S.createElement(Se.Provider,{value:T},S.createElement(Ne.Provider,{value:g},g.tabs.length<=0&&S.createElement(Rt,{onFocus:()=>{var P,A;for(let B of d.current)if(((P=B.current)==null?void 0:P.tabIndex)===0)return(A=B.current)==null||A.focus(),!0;return!1}}),M({ourProps:R,theirProps:c,slot:w,defaultTag:Gt,name:"Tabs"}))))}let qt="div";function Jt(a,t){let{orientation:s,selectedIndex:r}=Y("Tab.List"),l=te(t),i=o.useMemo(()=>({selectedIndex:r}),[r]),n=a,c={ref:l,role:"tablist","aria-orientation":s};return ae()({ourProps:c,theirProps:n,slot:i,defaultTag:qt,name:"Tabs.List"})}let Xt="button";function Zt(a,t){var s,r;let l=o.useId(),{id:i=`headlessui-tabs-tab-${l}`,disabled:n=!1,autoFocus:c=!1,...h}=a,{orientation:m,activation:u,selectedIndex:x,tabs:b,panels:p}=Y("Tab"),v=ke("Tab"),w=Y("Tab"),[f,d]=o.useState(null),g=o.useRef(null),y=te(g,t,d);oe(()=>v.registerTab(g),[v,g]);let k=Xe("tabs"),F=b.indexOf(g);F===-1&&(F=k);let I=F===x,T=O(N=>{var C;let U=N();if(U===ie.Success&&u==="auto"){let H=(C=Nt(g))==null?void 0:C.activeElement,Fe=w.tabs.findIndex(st=>st.current===H);Fe!==-1&&v.change(Fe)}return U}),R=O(N=>{let C=b.map(U=>U.current).filter(Boolean);if(N.key===$.Space||N.key===$.Enter){N.preventDefault(),N.stopPropagation(),v.change(F);return}switch(N.key){case $.Home:case $.PageUp:return N.preventDefault(),N.stopPropagation(),T(()=>z(C,L.First));case $.End:case $.PageDown:return N.preventDefault(),N.stopPropagation(),T(()=>z(C,L.Last))}if(T(()=>Z(m,{vertical(){return N.key===$.ArrowUp?z(C,L.Previous|L.WrapAround):N.key===$.ArrowDown?z(C,L.Next|L.WrapAround):ie.Error},horizontal(){return N.key===$.ArrowLeft?z(C,L.Previous|L.WrapAround):N.key===$.ArrowRight?z(C,L.Next|L.WrapAround):ie.Error}}))===ie.Success)return N.preventDefault()}),M=o.useRef(!1),P=O(()=>{var N;M.current||(M.current=!0,(N=g.current)==null||N.focus({preventScroll:!0}),v.change(F),jt(()=>{M.current=!1}))}),A=O(N=>{N.preventDefault()}),{isFocusVisible:B,focusProps:Pe}=We({autoFocus:c}),{isHovered:se,hoverProps:ce}=wt({isDisabled:n}),{pressed:re,pressProps:q}=bt({disabled:n}),de=o.useMemo(()=>({selected:I,hover:se,active:re,focus:B,autofocus:c,disabled:n}),[I,se,B,re,c,n]),ue=Ke({ref:y,onKeyDown:R,onMouseDown:A,onClick:P,id:i,role:"tab",type:vt(a,f),"aria-controls":(r=(s=p[F])==null?void 0:s.current)==null?void 0:r.id,"aria-selected":I,tabIndex:I?0:-1,disabled:n||void 0,autoFocus:c},Pe,ce,q);return ae()({ourProps:ue,theirProps:h,slot:de,defaultTag:Xt,name:"Tabs.Tab"})}let Qt="div";function ea(a,t){let{selectedIndex:s}=Y("Tab.Panels"),r=te(t),l=o.useMemo(()=>({selectedIndex:s}),[s]),i=a,n={ref:r};return ae()({ourProps:n,theirProps:i,slot:l,defaultTag:Qt,name:"Tabs.Panels"})}let ta="div",aa=Ie.RenderStrategy|Ie.Static;function sa(a,t){var s,r,l,i;let n=o.useId(),{id:c=`headlessui-tabs-panel-${n}`,tabIndex:h=0,...m}=a,{selectedIndex:u,tabs:x,panels:b}=Y("Tab.Panel"),p=ke("Tab.Panel"),v=o.useRef(null),w=te(v,t);oe(()=>p.registerPanel(v),[p,v]);let f=Xe("panels"),d=b.indexOf(v);d===-1&&(d=f);let g=d===u,{isFocusVisible:y,focusProps:k}=We(),F=o.useMemo(()=>({selected:g,focus:y}),[g,y]),I=Ke({ref:w,id:c,role:"tabpanel","aria-labelledby":(r=(s=x[d])==null?void 0:s.current)==null?void 0:r.id,tabIndex:g?h:-1},k),T=ae();return!g&&((l=m.unmount)==null||l)&&!((i=m.static)!=null&&i)?S.createElement(He,{"aria-hidden":"true",...I}):T({ourProps:I,theirProps:m,slot:F,defaultTag:ta,features:aa,visible:g,name:"Tabs.Panel"})}let ra=ee(Zt),na=ee(Yt),ia=ee(Jt),la=ee(ea),oa=ee(sa),J=Object.assign(ra,{Group:na,List:ia,Panels:la,Panel:oa});const ca={animation:{spring:{type:"spring",damping:20,stiffness:300},fadeIn:{duration:.25,ease:"easeOut"},slideIn:{duration:.3,ease:"easeInOut"}}},W=a=>ca.animation[a],E={profileValue:"text-xl md:text-3xl lg:text-4xl font-semibold leading-none text-linear-text",profileLabel:"text-[10px] md:text-sm font-medium uppercase opacity-70 tracking-wider text-linear-text-secondary",profileUnit:"text-lg md:text-2xl font-medium opacity-80 text-linear-text-secondary",attributeLabel:"text-[9px] md:text-xs font-medium uppercase opacity-70 tracking-wider text-linear-text-tertiary",attributeValue:"text-[11px] md:text-sm font-semibold text-linear-text",timelineLabel:"text-[9px] md:text-xs font-medium opacity-70 text-linear-text-tertiary",timelineValue:"text-xs md:text-base font-semibold text-linear-text",statsGrid:"grid grid-cols-2 gap-2 md:flex md:flex-col md:gap-4",attributeRow:"grid grid-cols-3 gap-2 min-h-[32px] md:min-h-[48px]",avatarContainer:"relative h-[35vh] max-h-[280px] md:h-full w-full",safeArea:"pb-[env(safe-area-inset-bottom)]"},da=S.memo(function({metrics:t,formattedWeight:s,formattedLeanBodyMass:r,className:l}){const i=W("fadeIn"),n=[{value:t.bodyFatPercentage>0?t.bodyFatPercentage.toFixed(1):"--",unit:t.bodyFatPercentage>0?"%":void 0,label:"Body Fat",accessibilityLabel:`Body fat percentage: ${t.bodyFatPercentage>0?t.bodyFatPercentage.toFixed(1)+" percent":"not available"}`},{value:s,label:"Weight",accessibilityLabel:`Weight: ${s}`},{value:isNaN(t.ffmi)||!isFinite(t.ffmi)?"--":t.ffmi.toFixed(1),label:"FFMI",accessibilityLabel:`Fat Free Mass Index: ${isNaN(t.ffmi)||!isFinite(t.ffmi)?"not available":t.ffmi.toFixed(1)}`},{value:r,label:"Lean Body Mass",accessibilityLabel:`Lean body mass: ${r}`},{value:t.stepCount?t.stepCount.toString():"0",label:"Steps",accessibilityLabel:`Step count: ${t.stepCount??0}`}];return e.jsx(D.div,{className:j(E.statsGrid,"mb-3 md:mb-8",l),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:i,children:n.map((c,h)=>e.jsxs(D.div,{className:"min-w-0 shrink-0 text-center md:text-left",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...i,delay:h*.05},children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-1 md:justify-start","aria-label":c.accessibilityLabel,children:[e.jsx("span",{className:j(E.profileValue,"font-inter tracking-tight"),children:c.value}),c.unit&&e.jsx("span",{className:E.profileUnit,children:c.unit})]}),e.jsx("div",{className:j(E.profileLabel,"mt-0.5"),children:c.label})]},c.label))})}),ua=(a,t)=>{S.useEffect(()=>{const s=`Stats updated: Body fat ${a.bodyFatPercentage>0?a.bodyFatPercentage.toFixed(1)+" percent":"not available"}, Weight ${t}, FFMI ${a.ffmi}, Steps ${a.stepCount??0}`,r=document.createElement("div");r.setAttribute("aria-live","polite"),r.setAttribute("aria-atomic","true"),r.style.position="absolute",r.style.left="-10000px",r.style.width="1px",r.style.height="1px",r.style.overflow="hidden",document.body.appendChild(r),setTimeout(()=>{r.textContent=s,setTimeout(()=>{document.body.removeChild(r)},1e3)},100)},[a.bodyFatPercentage,t,a.ffmi])},ha=a=>{if(!a)return 0;try{const t=typeof a=="string"?new Date(a):a;if(!t||isNaN(t.getTime()))return console.warn("Invalid birth date provided:",a),0;const l=(new Date().getTime()-t.getTime())/(1e3*60*60*24);return Math.floor(l/365.25)}catch(t){return console.error("Error calculating age:",t,"birthDate:",a),0}},ma=S.memo(function({user:t,userAge:s,formattedHeight:r,className:l}){const i=W("fadeIn"),n=t.birthDate?ha(t.birthDate):0,c=n>0?n:s,h=c>0,m=[{label:"Age",value:h?c.toString():"",accessibilityLabel:h?`Age: ${c} years old`:"Age not available",hidden:!h},{label:"Height",value:r,accessibilityLabel:`Height: ${r}`},{label:"Sex",value:t.gender?t.gender.charAt(0).toUpperCase()+t.gender.slice(1):"Not specified",accessibilityLabel:`Sex: ${t.gender||"Not specified"}`}];return e.jsx(D.div,{className:j(E.attributeRow,"pt-3 md:pt-6",l),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...i,delay:.3},children:m.map((u,x)=>e.jsxs(D.div,{className:j("flex flex-col justify-center text-center md:text-left",u.hidden&&"pointer-events-none opacity-0"),initial:{opacity:0,scale:.95},animate:{opacity:u.hidden?0:1,scale:1},transition:{...i,delay:.4+x*.05},"aria-hidden":u.hidden,children:[e.jsx("div",{className:j(E.attributeLabel,"mb-1"),children:u.label}),e.jsx("div",{className:E.attributeValue,"aria-label":u.accessibilityLabel,children:u.value||"-"})]},u.label))})}),ga=(a,t,s)=>{S.useEffect(()=>{const r=[];if(t>0&&r.push(`${t} years old`),s&&r.push(`Height ${s}`),a.gender&&r.push(`${a.gender}`),r.length>0){const l=`User profile: ${r.join(", ")}`,i=document.createElement("div");i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),i.style.position="absolute",i.style.left="-10000px",i.style.width="1px",i.style.height="1px",i.style.overflow="hidden",document.body.appendChild(i),setTimeout(()=>{i.textContent=l,setTimeout(()=>{document.body.removeChild(i)},1e3)},100)}},[a.gender,t,s])},fa=S.memo(function({metrics:t,user:s,userAge:r,formattedWeight:l,formattedHeight:i,formattedLeanBodyMass:n,className:c}){const h=W("fadeIn");return ua(t,l),ga(s,r,i),S.useEffect(()=>{typeof window<"u"&&window.gtag&&window.gtag("event","profile_viewed",{event_category:"Profile",event_label:"Profile Panel",custom_parameters:{user_has_name:!!s.name,user_has_height:!!i,user_has_age:r>0,body_fat_percentage:t.bodyFatPercentage,ffmi:t.ffmi}})},[t,s,r,i]),e.jsxs(D.div,{className:j("flex h-full w-full flex-col justify-center p-3 md:p-6","bg-linear-bg/95 backdrop-blur-xs",c),initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:h,role:"region","aria-label":"User profile and body metrics",children:[e.jsx(D.div,{className:"mb-3 md:mb-8",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{...h,delay:.1},children:e.jsx("h1",{className:"text-sm font-semibold tracking-tight text-linear-text md:text-lg",children:s.name||"Anonymous User"})}),e.jsx(da,{metrics:t,formattedWeight:l,formattedLeanBodyMass:n}),e.jsx("div",{className:"mt-auto border-t border-linear-border/30",children:e.jsx(ma,{user:s,userAge:r,formattedHeight:i})})]})}),xa=S.memo(function({metrics:t,selectedIndex:s,onIndexChange:r,className:l}){const i=W("fadeIn"),[n,c]=o.useState({selectedIndex:s,isDragging:!1,announcement:""});o.useEffect(()=>{c(g=>({...g,selectedIndex:s}))},[s]);const h=o.useCallback(g=>g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),[]),m=o.useCallback(g=>g.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),[]),u=o.useCallback(g=>{const y=g[0];c(F=>({...F,selectedIndex:y})),r(y);const k=t[y];if(k){const F=`Entry ${y+1} of ${t.length}, ${m(k.date)}`;c(I=>({...I,announcement:F}))}typeof window<"u"&&window.gtag&&window.gtag("event","timeline_changed",{event_category:"Profile",event_label:"Timeline Navigation",value:y,custom_parameters:{total_entries:t.length,entry_date:k?h(k.date):null}})},[t,r,h,m]),x=o.useCallback(()=>{c(g=>({...g,isDragging:!0}))},[]),b=o.useCallback(()=>{c(g=>({...g,isDragging:!1}))},[]),p=o.useMemo(()=>t[n.selectedIndex],[t,n.selectedIndex]);if(t.length===0)return null;const v=p?.date,w=t[0]?.date,f=t[t.length-1]?.date,d={value:[n.selectedIndex],onValueChange:u,onPointerDown:x,onPointerUp:b,max:t.length-1,min:0,step:1,"aria-label":`Timeline slider. Entry ${n.selectedIndex+1} of ${t.length}`,"aria-valuetext":v?`${m(v)}, entry ${n.selectedIndex+1} of ${t.length}`:void 0,"aria-describedby":"timeline-description"};return e.jsxs(D.div,{className:j("w-full border-t border-linear-border/50 bg-linear-bg shadow-xs",E.safeArea,l),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:i,children:[e.jsx("div",{className:"px-4 py-3 md:px-6 md:py-6",children:e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs(D.div,{className:"text-center",layout:!0,children:[e.jsx("div",{className:j(E.timelineValue,"tracking-tight"),"aria-live":"polite","aria-atomic":"true",children:v?h(v):"No date"}),e.jsxs("div",{className:j(E.timelineLabel,"mt-1"),id:"timeline-description",children:["Entry ",n.selectedIndex+1," of ",t.length]})]}),e.jsx("div",{className:"px-2 md:px-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Be,{...d,className:j("timeline-slider w-full","[&_[role=slider]]:h-6 [&_[role=slider]]:w-6","[&_[role=slider]]:border-2 [&_[role=slider]]:border-background","[&_[role=slider]]:shadow-lg focus:[&_[role=slider]]:shadow-xl","[&_.relative]:h-2")}),t.length>1&&e.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-1/2 flex -translate-y-1/2 transform justify-between",children:[e.jsx("div",{className:"h-1 w-1 rounded-full bg-muted-foreground/50"}),e.jsx("div",{className:"h-1 w-1 rounded-full bg-muted-foreground/50"})]})]})}),t.length>1&&w&&f&&e.jsxs(D.div,{className:"flex justify-between px-2 md:px-4",initial:{opacity:0},animate:{opacity:1},transition:{...i,delay:.2},children:[e.jsx("span",{className:j(E.timelineLabel,"text-left"),"aria-label":`Earliest entry: ${m(w)}`,children:h(w)}),e.jsx("span",{className:j(E.timelineLabel,"text-right"),"aria-label":`Latest entry: ${m(f)}`,children:h(f)})]})]})}),e.jsx("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:n.announcement})]})}),_e=S.memo(function({src:t,alt:s,srcSet:r,sizes:l,placeholder:i="/placeholder.svg",className:n,fallback:c,...h}){const[m,u]=o.useState(!1),[x,b]=o.useState(!1),[p,v]=o.useState(!1),w=o.useRef(null);o.useEffect(()=>{const g=new IntersectionObserver(([y])=>{y.isIntersecting&&(b(!0),g.disconnect())},{threshold:.1});return w.current&&g.observe(w.current),()=>g.disconnect()},[]);const f=()=>{u(!0),v(!1)},d=()=>{v(!0),u(!1)};return p&&c?e.jsx(e.Fragment,{children:c}):e.jsxs("div",{ref:w,className:j("relative overflow-hidden",n),children:[!m&&i&&e.jsx("img",{src:i,alt:"",className:j("absolute inset-0 h-full w-full object-cover transition-opacity duration-300",m?"opacity-0":"opacity-100"),"aria-hidden":"true"}),!m&&x&&e.jsx("div",{className:"absolute inset-0 animate-pulse bg-linear-to-r from-transparent via-white/20 to-transparent"}),x&&e.jsx("img",{src:t,srcSet:r,sizes:l,alt:s,onLoad:f,onError:d,className:j("h-full w-full object-cover transition-opacity duration-300",m?"opacity-100":"opacity-0"),loading:"lazy",...h})]})});function Ee(a,t){const s=a.includes("?")?"&":"?";return`${a}${s}width=${t} 1x, ${a}${s}width=${t*2} 2x`}function pa(a){return Math.max(5,Math.min(50,Math.round(a/5)*5))}function ba(a){const{bodyFat:t=20,gender:s="male"}=a;return{bodyFat:pa(t),sex:s==="female"?"f":"m"}}function va(a){return`${a.sex}_bf${a.bodyFat}.svg`}function Ze(a){return`/avatars/${va(a)}`}function ya(a){const t=ba(a);return Ze(t)}function wa(a){const t={bodyFat:20,sex:a.sex};return Ze(t)}const Me=S.memo(function({gender:t,bodyFatPercentage:s,showPhoto:r,profileImage:l,className:i,weight:n=70,height:c=170,age:h=30}){W("fadeIn");const m=W("spring"),[u,x]=o.useState(!1),b=o.useMemo(()=>ya({bodyFat:s,gender:t}),[n,c,s,h,t]),p=o.useMemo(()=>wa({sex:t==="female"?"f":"m"}),[s,t]),v=()=>{x(!0)},w=()=>{x(!1)};return e.jsx("div",{className:j(E.avatarContainer,"overflow-hidden",i),children:e.jsx("div",{className:"flex h-full items-center justify-center p-4",children:e.jsx(ye,{mode:"wait",children:r&&l?e.jsx(D.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:m,className:"max-h-full max-w-full",children:e.jsx(_e,{src:l,srcSet:Ee(l,400),sizes:"(min-width: 768px) 400px, 100vw",alt:"Profile photo showing current body composition",className:"max-h-full max-w-full rounded-lg object-contain shadow-lg"})},"photo"):e.jsx(D.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:m,className:"flex h-64 w-40 items-center justify-center md:h-80 md:w-48",children:e.jsx(_e,{src:u?p:b,srcSet:Ee(u?p:b,256),sizes:"(min-width: 768px) 256px, 40vw",alt:`${t} body composition wireframe showing ${(s||0).toFixed(1)}% body fat`,className:"h-full w-full object-contain",onError:v,onLoad:w,style:{filter:"drop-shadow(0 0 8px rgba(255, 255, 255, 0.1))"}})},"avatar")})})})}),ja=S.memo(function({tabs:t,defaultIndex:s=0,onTabChange:r,className:l,swipeEnabled:i=!0}){const[n,c]=o.useState(s),[h,m]=o.useState(null),u=W("spring"),x=W("fadeIn"),b=o.useRef(null),p=f=>{c(f),r?.(f),typeof window<"u"&&window.gtag&&window.gtag("event","tab_changed",{event_category:"Profile",event_label:"Tab Navigation",value:f,custom_parameters:{tab_name:t[f]?.label,total_tabs:t.length}})},v=(f,d)=>{if(!i)return;(Math.abs(d.offset.x)>50||Math.abs(d.velocity.x)>500)&&(d.offset.x>0&&n>0?p(n-1):d.offset.x<0&&n<t.length-1&&p(n+1)),m(null)},w=(f,d)=>{i&&(d.velocity.x>0?m("right"):d.velocity.x<0&&m("left"))};return t.length===0?null:e.jsxs("div",{className:j("flex h-full flex-col",l),children:[e.jsxs(J.Group,{selectedIndex:n,onChange:p,children:[e.jsx("div",{className:"pt-safe-top shrink-0",children:e.jsx(J.List,{className:"m-4 flex justify-center rounded-xl bg-secondary/20 p-1",children:t.map((f,d)=>e.jsx(J,{className:({selected:g})=>j("relative flex-1 rounded-lg px-6 py-3 text-sm font-medium transition-all duration-200","focus:outline-hidden focus:ring-2 focus:ring-primary focus:ring-offset-2","min-h-[48pt]",g?"bg-primary text-white shadow-xs":"text-muted-foreground hover:bg-secondary/30 hover:text-foreground"),"aria-label":`Switch to ${f.label} view`,children:({selected:g})=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"relative z-10",children:f.label}),g&&e.jsx(D.div,{className:"absolute inset-0 rounded-lg bg-primary",layoutId:"activeTab",transition:u})]})},f.id))})}),e.jsx("div",{ref:b,className:"relative flex-1 overflow-hidden",children:e.jsx(J.Panels,{className:"h-full",children:e.jsx(ye,{mode:"wait",initial:!1,children:t.map((f,d)=>e.jsx(J.Panel,{className:j("h-full w-full focus:outline-hidden",d===n?"block":"hidden"),tabIndex:-1,children:e.jsx(D.div,{className:"h-full w-full",drag:i?"x":!1,dragConstraints:{left:0,right:0},dragElastic:.1,onDragStart:w,onDragEnd:v,initial:{opacity:0,x:d>n?20:d<n?-20:0},animate:{opacity:1,x:0,scale:h?.98:1},exit:{opacity:0,x:d>n?20:-20},transition:u,whileDrag:{scale:.98,rotateY:h==="left"?-2:h==="right"?2:0},children:f.content})},`${f.id}-${n}`))})})})]}),i&&h&&e.jsx(D.div,{className:"pointer-events-none absolute bottom-4 left-1/2 z-50 -translate-x-1/2 transform",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:x,children:e.jsxs("div",{className:"rounded-full bg-black/60 px-3 py-1 text-xs font-medium text-white backdrop-blur-xs",children:[h==="left"&&n<t.length-1&&"Swipe to next →",h==="right"&&n>0&&"← Swipe to previous"]})})]})}),Na=(a,t,s)=>{const r=[{id:"avatar",label:"Avatar",content:a},{id:"photo",label:"Photo",content:t}];return s&&r.push({id:"progress",label:"Progress",content:s}),r},Sa={dexa:"DEXA Scan",scale:"Smart Scale",calipers:"Calipers",visual:"Visual Estimate",healthkit:"HealthKit"};function ka({open:a,onOpenChange:t,onSave:s,units:r}){const[l,i]=o.useState(""),[n,c]=o.useState([15]),[h,m]=o.useState("scale"),[u,x]=o.useState(!1),b=Ue(),p=()=>{const f=parseFloat(l);isNaN(f)||f<=0||(s({weight:f,bodyFatPercentage:n[0],method:h,date:new Date}),i(""),c([15]),m("scale"),t(!1))},v=()=>{i(""),c([15]),m("scale"),t(!1)},w=async()=>{if(!(!le()||!b.isAvailable)){x(!0);try{if(!b.isAuthorized&&!await b.requestPermissions()){console.warn("HealthKit permissions not granted");return}const f=await b.getHealthData();if(f&&f.weight){let d=f.weight;r==="imperial"&&(d=Math.round(f.weight*2.20462*10)/10),s({weight:f.weight,bodyFatPercentage:n[0],method:"healthkit",date:new Date}),i(""),c([15]),m("scale"),t(!1),console.log("HealthKit data imported:",d,r==="imperial"?"lbs":"kg")}else console.warn("No weight data found in HealthKit")}catch(f){console.error("Error importing HealthKit data:",f)}finally{x(!1)}}};return e.jsx(we,{open:a,onOpenChange:v,children:e.jsxs(je,{className:"max-w-md border-border bg-background text-foreground",children:[e.jsx(nt,{children:e.jsx(it,{className:"text-xl font-semibold tracking-tight text-foreground",children:"Log New Measurement"})}),e.jsxs("div",{className:"space-y-6 py-4",children:[le()&&b.isAvailable&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"text-sm font-medium uppercase tracking-wide text-muted-foreground",children:"Import from HealthKit"}),e.jsx(_,{type:"button",variant:"outline-solid",onClick:w,disabled:u,className:"h-12 w-full border-border bg-secondary text-foreground hover:bg-muted",children:u?e.jsxs(e.Fragment,{children:[e.jsx(kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing from HealthKit..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"mr-2 h-4 w-4"}),"Import from HealthKit"]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or enter manually"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(V,{htmlFor:"weight",className:"text-sm font-medium uppercase tracking-wide text-muted-foreground",children:["Weight (",r==="metric"?"kg":"lbs",")"]}),e.jsx(pe,{id:"weight",type:"number",placeholder:"Enter weight",value:l,onChange:f=>i(f.target.value),className:"h-12 border-border bg-secondary text-base text-foreground placeholder:text-muted-foreground"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(V,{className:"text-sm font-medium uppercase tracking-wide text-muted-foreground",children:["Body Fat: ",n[0].toFixed(1),"%"]}),e.jsx(Be,{value:n,onValueChange:c,max:50,min:3,step:.1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs font-medium text-muted-foreground",children:[e.jsx("span",{children:"3%"}),e.jsx("span",{children:"50%"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{className:"text-sm font-medium uppercase tracking-wide text-muted-foreground",children:"Method"}),e.jsxs(Oe,{value:h,onValueChange:f=>m(f),children:[e.jsx(Ve,{className:"h-12 border-border bg-secondary text-foreground",children:e.jsx(ze,{})}),e.jsx(Ge,{className:"border-border bg-background",children:Object.entries(Sa).filter(([f])=>f!=="healthkit").map(([f,d])=>e.jsx(K,{value:f,className:"text-foreground hover:bg-muted",children:d},f))})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(_,{onClick:p,className:"h-12 w-full bg-primary text-base font-semibold text-primary-foreground hover:bg-primary/90",disabled:!l||parseFloat(l)<=0,children:"Save Measurement"})})]})})}const Qe=o.createContext(null);function Pa({children:a,totalSteps:t,initialStep:s=0,onStepChange:r,onComplete:l}){const[i,n]=o.useState(s),[c,h]=o.useState(!1),m=lt.isNativePlatform(),u=i===0,x=i===t-1,b=(i+1)/t*100,p=o.useCallback(async()=>{if(c)if(m&&await he.impact({style:me.Light}),x)l?.();else{const d=i+1;n(d),h(!1),r?.(d)}},[i,x,c,l,r,m]),v=o.useCallback(async()=>{if(u)return;m&&await he.impact({style:me.Light});const d=i-1;n(d),h(!0),r?.(d)},[i,u,r,m]),w=o.useCallback(async d=>{d<0||d>=t||d===i||(m&&await he.impact({style:me.Light}),n(d),h(!0),r?.(d))},[i,t,r,m]),f={currentStep:i,totalSteps:t,isFirstStep:u,isLastStep:x,progress:b,goNext:p,goBack:v,goToStep:w,canGoNext:c,setCanGoNext:h};return e.jsx(Qe.Provider,{value:f,children:a})}function Fa(){const a=o.useContext(Qe);if(!a)throw new Error("useStepper must be used within a StepperProvider");return a}class Ca{startTime=null;stepStartTimes={};backNavigationCount=0;usedHealthKit=!1;usedPresets=!1;startFlow(t){this.startTime=Date.now(),this.stepStartTimes={},this.backNavigationCount=0,this.usedHealthKit=!1,this.usedPresets=!1,this.track("log_weight_started",t)}completeStep(t){const s=this.stepStartTimes[t.step_number],r=s?(Date.now()-s)/1e3:0;this.track("step_completed",{...t,time_spent_seconds:Math.round(r*10)/10}),t.interaction_type==="preset"&&(this.usedPresets=!0),t.interaction_type==="healthkit"&&(this.usedHealthKit=!0)}startStep(t){this.stepStartTimes[t]=Date.now()}navigateBack(){this.backNavigationCount++}trackWeightInput(t){this.track("weight_input_method",t)}trackBodyFatInput(t){this.track("body_fat_input_method",t)}trackSave(t){const s=this.startTime?(Date.now()-this.startTime)/1e3:0;this.track("measurement_saved",{...t,total_flow_time_seconds:Math.round(s*10)/10,steps_back_navigated:this.backNavigationCount,used_healthkit:this.usedHealthKit,used_presets:this.usedPresets})}completeFlow(t){console.log("[Analytics] Flow completed:",t)}trackValidationError(t){this.track("validation_error",t)}trackAccessibility(t){this.track("accessibility_interaction",t)}trackPhotoAdded(t){this.track("photo_added",t)}track(t,s){console.log(`[Analytics] ${t}:`,s)}}const ve=new Ca,gs={getInteractionType:a=>a.type==="keydown"||a.type==="keyup"?"keyboard":"tap",getPrecision:a=>{const t=a.toString(),s=t.indexOf(".");return s===-1?0:t.length-s-1},wasSnappedToIncrement:(a,t,s)=>{const r=Math.round(a/s)*s;return Math.abs(t-r)<.001}};async function Ia({file:a,userId:t,bodyMetricsId:s}){try{if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(a.type))throw new Error("Invalid file type. Please upload a JPG, PNG, or WebP image.");const l=10*1024*1024;if(a.size>l)throw new Error("File size too large. Maximum size is 10MB.");const i=new Date().getTime(),n=a.name.split(".").pop(),c=s?`${s}_${i}.${n}`:`progress_${i}.${n}`,h=`${t}/${c}`,{data:m,error:u}=await xe.storage.from("progress-photos").upload(h,a,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Upload error:",u),new Error(u.message);const{data:{publicUrl:x}}=xe.storage.from("progress-photos").getPublicUrl(h);return{url:x,path:h}}catch(r){return console.error("Photo upload error:",r),{url:"",path:"",error:r instanceof Error?r.message:"Failed to upload photo"}}}async function Da(a){try{const{error:t}=await xe.storage.from("progress-photos").remove([a]);return t?(console.error("Delete error:",t),!1):!0}catch(t){return console.error("Photo delete error:",t),!1}}async function Ta(a,t=1920){return new Promise((s,r)=>{const l=new FileReader;l.readAsDataURL(a),l.onload=i=>{const n=new Image;n.src=i.target?.result,n.onload=()=>{const c=document.createElement("canvas"),h=c.getContext("2d");if(!h){r(new Error("Could not get canvas context"));return}let m=n.width,u=n.height;m>t&&(u=t/m*u,m=t),c.width=m,c.height=u,h.drawImage(n,0,0,m,u),c.toBlob(x=>{if(!x){r(new Error("Compression failed"));return}const b=new File([x],a.name,{type:"image/jpeg",lastModified:Date.now()});s(b)},"image/jpeg",.85)},n.onerror=()=>r(new Error("Image load failed"))},l.onerror=()=>r(new Error("File read failed"))})}function _a(a={}){const{user:t}=Re(),{toast:s}=ot(),[r,l]=o.useState(!1),[i,n]=o.useState(0),c=o.useCallback(async(m,u)=>{if(!t?.id){const x="User not authenticated";return s({title:"Error",description:x,variant:"destructive"}),a.onError?.(x),null}l(!0),n(0);try{let x=m;a.autoCompress!==!1&&(n(10),s({title:"Processing",description:"Compressing image..."}),x=await Ta(m,a.maxWidth||1920),n(30)),s({title:"Uploading",description:"Uploading your photo..."});const b=await Ia({file:x,userId:t.id,bodyMetricsId:u});if(n(100),b.error)throw new Error(b.error);return s({title:"Success",description:"Photo uploaded successfully"}),a.onSuccess?.(b),b}catch(x){const b=x instanceof Error?x.message:"Upload failed";return s({title:"Upload Failed",description:b,variant:"destructive"}),a.onError?.(b),null}finally{l(!1),n(0)}},[t?.id,s,a]),h=o.useCallback(async m=>{try{const u=await Da(m);if(u)s({title:"Success",description:"Photo deleted successfully"});else throw new Error("Failed to delete photo");return u}catch{return s({title:"Delete Failed",description:"Failed to delete photo",variant:"destructive"}),!1}},[s]);return{uploadPhoto:c,deletePhoto:h,isUploading:r,uploadProgress:i}}function Ea({isOpen:a,onClose:t,onPhotoUploaded:s,bodyMetricsId:r}){const l=o.useRef(null),[i,n]=o.useState(null),[c,h]=o.useState(null),{uploadPhoto:m,isUploading:u,uploadProgress:x}=_a({onSuccess:f=>{s?.(f.url),v()}}),b=o.useCallback(f=>{const d=f.target.files?.[0];if(!d)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(d.type)){alert("Please select a valid image file (JPG, PNG, or WebP)");return}n(d);const y=new FileReader;y.onload=k=>{h(k.target?.result)},y.readAsDataURL(d)},[]),p=async()=>{i&&await m(i,r)},v=()=>{n(null),h(null),l.current&&(l.current.value=""),t()},w=()=>{n(null),h(null),l.current?.click()};return e.jsx(we,{open:a,onOpenChange:v,children:e.jsx(je,{className:"max-w-md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Add Progress Photo"}),e.jsx("p",{className:"text-muted-foreground",children:"Capture your progress with a photo"})]}),e.jsx("input",{ref:l,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:b,className:"hidden",capture:"environment"}),c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-3/4 w-full overflow-hidden rounded-lg bg-secondary",children:[e.jsx("img",{src:c,alt:"Progress photo preview",className:"h-full w-full object-cover"}),u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80",children:e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(St,{value:x,className:"w-32"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Uploading... ",x,"%"]})]})})]}),!u&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline-solid",onClick:w,className:"flex-1",children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Retake"]}),e.jsxs(_,{onClick:p,className:"flex-1",disabled:!i,children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Upload"]})]})]}):e.jsxs("div",{onClick:()=>l.current?.click(),className:j("flex aspect-3/4 w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-border bg-secondary/20 transition-colors hover:border-primary/50 hover:bg-secondary/30"),children:[e.jsx(Ye,{className:"mb-4 h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-lg font-medium text-foreground",children:"Take or select a photo"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"JPG, PNG or WebP • Max 10MB"})]}),!u&&e.jsx(_,{variant:"ghost",onClick:v,className:"w-full",children:"Cancel"}),e.jsxs("div",{className:"rounded-lg bg-secondary/20 p-4 text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium mb-2",children:"Tips for best results:"}),e.jsxs("ul",{className:"space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Use consistent lighting and angle"}),e.jsx("li",{children:"Take photos at the same time of day"}),e.jsx("li",{children:"Wear similar clothing each time"}),e.jsx("li",{children:"Use a mirror or timer for consistency"})]})]})]})})})}const Ma=S.lazy(()=>Q(()=>import("./WeightStep-kS1QrtDI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])).then(a=>({default:a.WeightStep}))),Aa=S.lazy(()=>Q(()=>import("./BodyFatStep-CqDuS-OZ.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])).then(a=>({default:a.BodyFatStep}))),$a=S.lazy(()=>Q(()=>import("./MethodStep-eQI9pxgq.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,20,10,21,9,11,12,13,14,15,16,17])).then(a=>({default:a.MethodStep}))),La=S.lazy(()=>Q(()=>import("./ReviewStep-Dk29UFHv.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])).then(a=>({default:a.ReviewStep})));function Ua({onComplete:a,onCancel:t,initialData:s,weightData:r,setWeightData:l,bodyFatData:i,setBodyFatData:n,methodData:c,setMethodData:h,photoUrl:m,setPhotoUrl:u,showPhotoCapture:x,setShowPhotoCapture:b}){const{currentStep:p,canGoNext:v,goNext:w,goBack:f,goToStep:d,progress:g}=Fa(),y=4,k=["Weight","Body Fat","Method","Review"],F=M=>{d(M)},I=()=>{b(!0)},T=M=>{u(M),ve.trackPhotoAdded({photo_url:M})},R=()=>{switch(p){case 0:return e.jsx(Ma,{value:r,onChange:l});case 1:return e.jsx(Aa,{value:i,onChange:n});case 2:return e.jsx($a,{value:c,onChange:h});case 3:return e.jsx(La,{weight:r,bodyFat:i,method:c,onEditStep:F,onAddPhoto:I});default:return null}};return e.jsxs("div",{className:"flex h-full flex-col bg-linear-bg font-inter",children:[e.jsx(Ea,{isOpen:x,onClose:()=>b(!1),onPhotoUploaded:T}),e.jsx(ct,{currentStep:p,totalSteps:y,stepTitles:k,progress:g,onBack:f,onCancel:t}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"h-full overflow-y-auto px-6 pb-safe-bottom",children:e.jsx(S.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-linear-purple border-t-transparent"})}),children:e.jsx(ye,{mode:"wait",children:e.jsx(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.25,type:"spring",damping:20},className:"h-full text-linear-text",children:R()},p)})})})}),e.jsx(dt,{currentStep:p,totalSteps:y,canGoNext:v,onBack:f,onNext:w})]})}function Ra(a){const[t,s]=o.useState(a.initialData?.weight||{value:0,unit:"lbs"}),[r,l]=o.useState(a.initialData?.bodyFat||{value:15}),[i,n]=o.useState(a.initialData?.method||{value:"scale",label:"Digital Scale"}),[c,h]=o.useState(),[m,u]=o.useState(!1),x=async()=>{ve.completeFlow({total_steps:4,completion_time_seconds:Date.now()-ve.startTime,final_weight:`${t.value} ${t.unit}`,final_body_fat:`${r.value}%`,final_method:i.label,had_photo:!!c}),a.onComplete({weight:t,bodyFat:r,method:i,photoUrl:c})};return e.jsx(Pa,{totalSteps:4,initialStep:0,onComplete:x,children:e.jsx(Ua,{...a,weightData:t,setWeightData:s,bodyFatData:r,setBodyFatData:l,methodData:i,setMethodData:n,photoUrl:c,setPhotoUrl:h,showPhotoCapture:m,setShowPhotoCapture:u})})}const Ba={id:"1",name:"John Doe",email:"john@example.com",gender:"male",birthday:new Date("1990-01-15"),height:180},Ha=[{id:"1",userId:"1",date:new Date("2024-01-01"),weight:80,bodyFatPercentage:15,method:"dexa",stepCount:5e3},{id:"2",userId:"1",date:new Date("2024-01-15"),weight:79.5,bodyFatPercentage:14.5,method:"scale",stepCount:6500},{id:"3",userId:"1",date:new Date("2024-02-01"),weight:79,bodyFatPercentage:14,method:"calipers",stepCount:7e3},{id:"4",userId:"1",date:new Date("2024-02-15"),weight:78.5,bodyFatPercentage:13.5,method:"scale",stepCount:8e3}],Wa={userId:"1",units:"imperial",healthKitSyncEnabled:!1,googleFitSyncEnabled:!1};function Ka(a){return a/2.20462}function ge(a){return a*2.20462}function Ae(a){const t=a/2.54,s=Math.floor(t/12),r=Math.round(t%12);return`${s}'${r}"`}function Oa(a){return a/2.54}function Va(a,t){return!a||a<=0||isNaN(a)?0:!t||t<0||t>100||isNaN(t)?a:a*(1-t/100)}function za(a,t){if(!a||a<=0||isNaN(a)||!t||t<=0||isNaN(t))return 0;const s=t/100,r=a/(s*s);return isNaN(r)||!isFinite(r)?0:r}function et(){const[a,t]=o.useState(Ba),[s,r]=o.useState(Ha),[l,i]=o.useState(s.length-1),[n,c]=o.useState(Wa),h=o.useMemo(()=>[...s].sort((d,g)=>d.date.getTime()-g.date.getTime()),[s]),m=o.useMemo(()=>{const d=h[l];if(!d)return{bodyFatPercentage:0,weight:0,ffmi:0,leanBodyMass:0,stepCount:0,date:new Date};const g=Va(d.weight,d.bodyFatPercentage),y=za(g,a.height);return{bodyFatPercentage:d.bodyFatPercentage,weight:d.weight,ffmi:Math.round(y*10)/10,leanBodyMass:Math.round(g*10)/10,stepCount:d.stepCount,date:d.date}},[h,l,a.height]),u=o.useCallback(d=>{const g={...d,id:Date.now().toString(),userId:a.id};r(y=>[...y,g]),i(h.length)},[a.id,h.length]),x=o.useCallback(d=>{console.log("User updates:",d),t(g=>({...g,...d}))},[]),b=o.useCallback(d=>{c(g=>({...g,...d}))},[]),p=o.useCallback(d=>{if(!d||d<=0||isNaN(d))return n.units==="metric"?"0 kg":"0 lbs";if(n.units==="metric")return`${Math.round(d*10)/10} kg`;{const g=ge(d);return`${Math.round(g*10)/10} lbs`}},[n.units]),v=o.useCallback(d=>n.units==="metric"?`${d} cm`:Ae(d),[n.units]),w=o.useCallback(d=>{if(!d||d<=0||isNaN(d))return n.units==="metric"?"0 kg":"0 lbs";if(n.units==="metric")return`${Math.round(d*10)/10} kg`;{const g=ge(d);return`${Math.round(g*10)/10} lbs`}},[n.units]),f=o.useCallback(()=>{const d=new Date,g=new Date(a.birthday);let y=d.getFullYear()-g.getFullYear();const k=d.getMonth()-g.getMonth();return(k<0||k===0&&d.getDate()<g.getDate())&&y--,y},[a.birthday]);return{user:a,metrics:h,currentMetrics:m,selectedDateIndex:l,setSelectedDateIndex:i,addMetric:u,updateUser:x,getUserAge:f,settings:n,updateSettings:b,getFormattedWeight:p,getFormattedHeight:v,getFormattedLeanBodyMass:w,utils:{lbsToKg:Ka,kgToLbs:ge,cmToFeet:Ae,cmToInches:Oa}}}function Ga({onSave:a,trigger:t,initialData:s}){const[r,l]=o.useState(!1),{saveEntry:i,isLoading:n}=et(),c=async m=>{try{const u={weight:m.weight.value,weight_unit:m.weight.unit,body_fat_percentage:m.bodyFat.value,measurement_method:m.method.value,photo_url:m.photoUrl};a&&await a(m),await i(u),Ce({title:"Entry saved",description:"Your weight has been logged successfully"}),l(!1)}catch(u){console.error("Error saving weight data:",u),Ce({title:"Error saving entry",description:u instanceof Error?u.message:"Please try again.",variant:"destructive"})}},h=()=>{l(!1)};return e.jsxs(e.Fragment,{children:[t?e.jsx("div",{onClick:()=>l(!0),children:t}):e.jsxs(_,{onClick:()=>l(!0),className:"gap-2",variant:"default",children:[e.jsx(be,{className:"h-4 w-4"}),"Log Weight"]}),e.jsx(ut,{isOpen:r,onClose:h,showCloseButton:!0,className:"overflow-hidden",children:e.jsx(Ra,{onComplete:c,onCancel:h,initialData:s,isLoading:n})})]})}const Ya=S.memo(function({onComplete:t,units:s,className:r}){const[l,i]=o.useState(""),[n,c]=o.useState(""),[h,m]=o.useState("scale"),[u,x]=o.useState(!1),[b,p]=o.useState({}),v=()=>{const g={},y=parseFloat(l),k=parseFloat(n);return!l||isNaN(y)||y<=0?g.weight="Please enter a valid weight":s==="imperial"&&(y<50||y>1e3)?g.weight="Weight must be between 50-1000 lbs":s==="metric"&&(y<20||y>500)&&(g.weight="Weight must be between 20-500 kg"),(!n||isNaN(k)||k<1||k>60)&&(g.bodyFat="Body fat must be between 1-60%"),p(g),Object.keys(g).length===0},w=async g=>{if(g.preventDefault(),!!v()){x(!0);try{t({weight:parseFloat(l),bodyFatPercentage:parseFloat(n),method:h,date:new Date})}catch(y){console.error("Error saving initial weight:",y)}finally{x(!1)}}},f=s==="imperial"?"lbs":"kg",d=s==="imperial"?"e.g., 150":"e.g., 70";return e.jsx("div",{className:j("mx-auto w-full max-w-2xl",r),children:e.jsxs(ht,{className:"border-border bg-background",children:[e.jsxs(mt,{className:"pb-6 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:e.jsx(be,{className:"h-8 w-8 text-primary"})}),e.jsx(gt,{className:"text-2xl font-bold text-foreground",children:"Let's get started!"}),e.jsx(ft,{className:"mx-auto max-w-md text-base text-muted-foreground",children:"To begin tracking your body composition journey, we need your current measurements"})]}),e.jsxs(xt,{children:[e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{htmlFor:"weight",className:"flex items-center gap-2 text-base font-medium",children:[e.jsx(be,{className:"h-4 w-4 text-primary"}),"Current Weight (",f,")"]}),e.jsx(pe,{id:"weight",type:"number",value:l,onChange:g=>i(g.target.value),placeholder:d,className:j("h-12 text-lg",b.weight&&"border-destructive focus:border-destructive"),min:s==="imperial"?"50":"20",max:s==="imperial"?"1000":"500",step:"0.1",autoFocus:!0}),b.weight&&e.jsx("p",{className:"text-sm text-destructive",children:b.weight})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{htmlFor:"bodyFat",className:"flex items-center gap-2 text-base font-medium",children:[e.jsx(It,{className:"h-4 w-4 text-primary"}),"Body Fat Percentage"]}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{id:"bodyFat",type:"number",value:n,onChange:g=>c(g.target.value),placeholder:"e.g., 15",className:j("h-12 pr-12 text-lg",b.bodyFat&&"border-destructive focus:border-destructive"),min:"1",max:"60",step:"0.1"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 transform text-muted-foreground",children:"%"})]}),b.bodyFat&&e.jsx("p",{className:"text-sm text-destructive",children:b.bodyFat}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Don't know your body fat? Start with an estimate - you can update it later"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{htmlFor:"method",className:"flex items-center gap-2 text-base font-medium",children:[e.jsx(Dt,{className:"h-4 w-4 text-primary"}),"Measurement Method"]}),e.jsxs(Oe,{value:h,onValueChange:m,children:[e.jsx(Ve,{className:"h-12 text-lg",children:e.jsx(ze,{})}),e.jsxs(Ge,{children:[e.jsx(K,{value:"scale",children:"Smart Scale"}),e.jsx(K,{value:"dexa",children:"DEXA Scan"}),e.jsx(K,{value:"bodpod",children:"Bod Pod"}),e.jsx(K,{value:"calipers",children:"Body Fat Calipers"}),e.jsx(K,{value:"visual",children:"Visual Estimate"}),e.jsx(K,{value:"other",children:"Other"})]})]})]}),e.jsx(_,{type:"submit",className:"h-12 w-full text-base font-semibold",disabled:u||!l||!n,children:u?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-r-transparent"}),"Setting up your profile..."]}):"Start Tracking"})]}),e.jsx("div",{className:"mt-6 rounded-lg bg-muted/30 p-4",children:e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Tip:"})," Your measurements will be used to calculate FFMI and track progress over time. Don't worry about being precise - consistency is more important than accuracy."]})})]})]})})});function $e({children:a}){return e.jsx(e.Fragment,{children:a})}const qa=Tt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),tt=o.forwardRef(({className:a,variant:t,...s},r)=>e.jsx("div",{ref:r,role:"alert",className:j(qa({variant:t}),a),...s}));tt.displayName="Alert";const Ja=o.forwardRef(({className:a,...t},s)=>e.jsx("h5",{ref:s,className:j("mb-1 font-medium leading-none tracking-tight",a),...t}));Ja.displayName="AlertTitle";const at=o.forwardRef(({className:a,...t},s)=>e.jsx("div",{ref:s,className:j("text-sm [&_p]:leading-relaxed",a),...t}));at.displayName="AlertDescription";function Xa(){const[a,t]=o.useState(!1),[s,r]=o.useState(!1),{user:l}=Re();o.useEffect(()=>{const c=localStorage.getItem("pending_email_confirmation"),h=localStorage.getItem("email_banner_dismissed");c&&!h&&l&&!s&&t(!0)},[l,s]);const i=()=>{t(!1),r(!0),localStorage.setItem("email_banner_dismissed","true")},n=async()=>{console.log("Resending confirmation email...")};return a?e.jsxs(tt,{className:"mb-4 border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:[e.jsx(_t,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),e.jsxs(at,{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Please check your email and click the confirmation link to fully activate your account."})}),e.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[e.jsx(_,{variant:"outline-solid",size:"sm",onClick:n,className:"h-8 border-blue-300 text-xs text-blue-700 hover:bg-blue-100 dark:border-blue-700 dark:text-blue-300 dark:hover:bg-blue-900",children:"Resend"}),e.jsx(_,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0 text-blue-600 hover:bg-blue-100 dark:text-blue-400 dark:hover:bg-blue-900",children:e.jsx(qe,{className:"h-4 w-4"})})]})]})]}):null}function Za({metrics:a,className:t}){const[s,r]=o.useState(null),l=o.useMemo(()=>a.filter(n=>n.photoUrl).sort((n,c)=>new Date(c.date).getTime()-new Date(n.date).getTime()),[a]),i=n=>new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(n);return l.length===0?e.jsxs("div",{className:j("text-center py-12",t),children:[e.jsx(Ye,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No progress photos yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Add photos when logging your measurements"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:j("space-y-6",t),children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:l.map((n,c)=>e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:c*.05},className:"group relative aspect-3/4 overflow-hidden rounded-lg bg-secondary cursor-pointer",onClick:()=>r(n),children:[e.jsx("img",{src:n.photoUrl,alt:`Progress photo from ${i(n.date)}`,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm mb-1",children:[e.jsx(Et,{className:"w-4 h-4"}),i(n.date)]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[n.weight.toFixed(1)," kg"]}),e.jsxs("div",{children:[n.bodyFatPercentage.toFixed(1),"% BF"]})]})]})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Mt,{className:"w-4 h-4 text-white"})})]},n.id))}),e.jsx("div",{className:"mt-6 p-4 rounded-lg bg-secondary/20 border border-border",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:[l.length," progress photos"]}),e.jsxs("p",{className:"mt-1",children:["From ",i(l[l.length-1].date)," to ",i(l[0].date)]})]})})]}),e.jsx(we,{open:!!s,onOpenChange:()=>r(null),children:e.jsx(je,{className:"max-w-4xl w-full h-[90vh] p-0",children:s&&e.jsxs("div",{className:"relative h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:i(s.date)}),e.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground mt-1",children:[e.jsxs("span",{children:[s.weight.toFixed(1)," kg"]}),e.jsxs("span",{children:[s.bodyFatPercentage.toFixed(1),"% BF"]}),s.method&&e.jsx("span",{children:s.method.label})]})]}),e.jsx("button",{onClick:()=>r(null),className:"p-2 rounded-full hover:bg-secondary transition-colors",children:e.jsx(qe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden bg-black/95 flex items-center justify-center",children:e.jsx("img",{src:s.photoUrl,alt:`Progress photo from ${i(s.date)}`,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 p-4 border-t border-border",children:[e.jsx("button",{onClick:()=>{const n=l.findIndex(c=>c.id===s.id);n>0&&r(l[n-1])},disabled:l.findIndex(n=>n.id===s.id)===0,className:"px-4 py-2 rounded-lg bg-secondary hover:bg-secondary/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[l.findIndex(n=>n.id===s.id)+1," / ",l.length]}),e.jsx("button",{onClick:()=>{const n=l.findIndex(c=>c.id===s.id);n<l.length-1&&r(l[n+1])},disabled:l.findIndex(n=>n.id===s.id)===l.length-1,className:"px-4 py-2 rounded-lg bg-secondary hover:bg-secondary/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})})]})}function Le(a){if(!a)return 30;const t=new Date(a),s=new Date;let r=s.getFullYear()-t.getFullYear();const l=s.getMonth()-t.getMonth();return(l<0||l===0&&s.getDate()<t.getDate())&&r--,Math.max(18,Math.min(65,r))}S.lazy(()=>Q(()=>import("./AvatarSilhouette-Cs_LniZT.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,9,10,11,12,13,14,15,16,17])).then(a=>({default:a.AvatarSilhouette})));const fe=()=>e.jsx("div",{className:"flex h-full min-h-[400px] items-center justify-center bg-muted/30 md:min-h-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading 3D avatar..."})]})}),Qa=()=>{console.log("Dashboard: Component rendering");const a=rt(),t=Lt();et();const s=Ue(),{user:r,metrics:l,currentMetrics:i,selectedDateIndex:n,setSelectedDateIndex:c,addMetric:h,getUserAge:m,getFormattedWeight:u,getFormattedHeight:x,getFormattedLeanBodyMass:b,settings:p,utils:v}=t,w=t.loading,[f,d]=o.useState(0),[g,y]=o.useState(!1),[k,F]=o.useState(!1),[I,T]=o.useState(!1),[R,M]=o.useState(null),[P,A]=o.useState(!1),[B,Pe]=o.useState(!1),se=C=>{d(C)},ce=o.useCallback(()=>{n<l.length-1?c(n+1):a("/settings")},[n,l.length,c,a]),re=o.useCallback(()=>{n>0&&c(n-1)},[n,c]);Ut({onSwipeLeft:ce,onSwipeRight:re,threshold:100}),S.useEffect(()=>{if(!P)if(le()&&s.isAvailable){(async()=>{try{if(s.isAuthorized){const H=await s.getHealthData();H&&H.weight&&(M(H),console.log("HealthKit weight data found:",H.weight))}}catch(H){console.warn("Error checking HealthKit data:",H)}finally{A(!0)}})();const U=setTimeout(()=>{P||(console.warn("HealthKit check timed out, proceeding without HealthKit data"),A(!0))},3e3);return()=>clearTimeout(U)}else A(!0)},[P]);const q=C=>{let U=C.weight;p.units==="imperial"&&(U=v.lbsToKg(C.weight)),h({...C,weight:U})},de=l.length>0&&l.some(C=>C.weight>0),ue=R&&R.weight>0,N=de||ue;return S.useEffect(()=>{!w&&r&&p&&P&&!N&&!I&&T(!0)},[w,r,p,P,N,I]),w||!r||!p?e.jsx("div",{className:"flex min-h-svh items-center justify-center bg-linear-bg font-inter",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-2 border-linear-purple border-t-transparent"}),e.jsx("p",{className:"text-linear-text-secondary",children:"Setting up your dashboard..."})]})}):I&&!N?e.jsx($e,{children:e.jsx("div",{className:"flex min-h-svh items-center justify-center bg-linear-bg p-6 font-inter",children:e.jsx(Ya,{onComplete:C=>{q(C),T(!1)},units:p.units})})}):e.jsx($e,{children:e.jsxs("div",{className:"flex h-svh flex-col overflow-hidden bg-linear-bg text-linear-text font-inter md:min-h-svh md:overflow-auto",children:[e.jsx("div",{className:"px-4 pt-4 md:px-6",children:e.jsx(Xa,{})}),e.jsxs("div",{className:"hidden items-center justify-between border-b border-linear-border px-6 py-4 md:flex",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight text-linear-text",children:"LogYourBody"}),e.jsx($t,{})]}),e.jsxs("div",{className:"flex gap-3",children:[le()&&e.jsx(_,{size:"icon",variant:"ghost",onMouseEnter:()=>G("/healthkit-test"),onFocus:()=>G("/healthkit-test"),onClick:()=>a("/healthkit-test"),className:"text-linear-text-secondary transition-colors hover:bg-linear-border/50 hover:text-linear-text",title:"HealthKit Testing (Development)",children:e.jsx(At,{className:"h-4 w-4"})}),e.jsx(_,{size:"icon",variant:"ghost",onClick:()=>{N?F(!0):T(!0)},className:"h-10 w-10 text-linear-text-secondary transition-colors hover:bg-linear-border/50 hover:text-linear-text",children:e.jsx(De,{className:"h-4 w-4"})}),e.jsx(_,{size:"icon",variant:"ghost",onMouseEnter:()=>G("/settings"),onFocus:()=>G("/settings"),onClick:()=>a("/settings"),className:"h-10 w-10 text-linear-text-secondary transition-colors hover:bg-linear-border/50 hover:text-linear-text",children:e.jsx(Te,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col md:flex-row",children:[e.jsxs("div",{className:"relative min-h-0 flex-[1.5] md:w-2/3 md:flex-1",children:[e.jsx(ja,{tabs:Na(e.jsx(o.Suspense,{fallback:e.jsx(fe,{}),children:e.jsx(Me,{gender:r.gender,bodyFatPercentage:i.bodyFatPercentage,showPhoto:!1,className:"h-full w-full",weight:i.weight,height:r.height,age:Le(r.birthday)})}),e.jsx(o.Suspense,{fallback:e.jsx(fe,{}),children:e.jsx(Me,{gender:r.gender,bodyFatPercentage:i.bodyFatPercentage,showPhoto:!0,profileImage:r.profileImage,className:"h-full w-full",weight:i.weight,height:r.height,age:Le(r.birthday)})}),e.jsx(o.Suspense,{fallback:e.jsx(fe,{}),children:e.jsx(Za,{metrics:l,className:"h-full w-full p-4 overflow-y-auto"})})),defaultIndex:f,onTabChange:se,swipeEnabled:!0,className:"h-full w-full"}),e.jsxs("div",{className:"top-safe-top absolute right-4 z-20 flex gap-3 md:hidden",children:[e.jsx(_,{size:"icon",variant:"ghost",onClick:()=>{N?F(!0):T(!0)},className:"h-10 w-10 bg-linear-bg/80 text-linear-text-secondary shadow-lg backdrop-blur-xs transition-colors hover:bg-linear-card hover:text-linear-text",children:e.jsx(De,{className:"h-4 w-4"})}),e.jsx(_,{size:"icon",variant:"ghost",onMouseEnter:()=>G("/settings"),onFocus:()=>G("/settings"),onClick:()=>a("/settings"),className:"h-10 w-10 bg-linear-bg/80 text-linear-text-secondary shadow-lg backdrop-blur-xs transition-colors hover:bg-linear-card hover:text-linear-text",children:e.jsx(Te,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"min-h-0 flex-[0.8] border-linear-border md:w-1/3 md:flex-1 md:border-l",children:e.jsx(fa,{metrics:i,user:r,userAge:m(),formattedWeight:u(i.weight),formattedHeight:x(r.height),formattedLeanBodyMass:b(i.leanBodyMass)})})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(xa,{metrics:l,selectedIndex:n,onIndexChange:c})}),e.jsx(ka,{open:g,onOpenChange:y,onSave:q,units:p.units}),e.jsx(Ga,{show:k,onSave:q,onClose:()=>F(!1),units:p.units,initialWeight:i.weight>0?p.units==="imperial"?v.kgToLbs(i.weight):i.weight:void 0,initialBodyFat:i.bodyFatPercentage})]})})},fs=Object.freeze(Object.defineProperty({__proto__:null,default:Qa},Symbol.toStringTag,{value:"Module"}));export{fs as D,_e as L,gs as a,Ee as b,Fa as u,ve as w};
