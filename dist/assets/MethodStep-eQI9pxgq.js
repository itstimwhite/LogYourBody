import{j as e}from"./ui-vendor-BTNJdHiL.js";import{a as c}from"./react-vendor-CGPzL8fz.js";import{h as N,m as r,c as i,H as S,I as w}from"./index-BWixOZri.js";import{u as C,w as d}from"./Dashboard-jXZD-6ec.js";import{m as E}from"./weight-logging-rZoVubPW.js";import{S as H,an as M,R as D,r as I,Z as T,ao as O,g as R,G as _}from"./utils-vendor-BD55slVq.js";import{m as n}from"./radio-group-BXTCuRDb.js";import"./data-vendor-Dz4nk24n.js";import"./analytics-vendor-CXgENQ1a.js";import"./use-is-mounted-Dtnm4exq.js";import"./focus-management-6kc7Qb5h.js";import"./input-CkE6ZwYN.js";import"./label-DJ6QZZke.js";import"./progress-DaDOMKAa.js";import"./VersionDisplay-BrEkyV1W.js";import"./prefetch-BKo02pYs.js";import"./use-supabase-body-metrics-D-84L7_Y.js";import"./use-swipe-navigation-Br04oNeb.js";import"./bugs-2q_Jw5H1.js";const l=[{value:"scale",label:"Digital Scale",icon:H,description:"Home or gym scale",accuracy:"Moderate accuracy"},{value:"dexa",label:"DEXA Scan",icon:M,description:"Professional scan",accuracy:"High accuracy"},{value:"calipers",label:"Calipers",icon:D,description:"Skinfold measurement",accuracy:"High accuracy"},{value:"visual",label:"Visual Estimate",icon:I,description:"Mirror assessment",accuracy:"Low accuracy"},{value:"bioimpedance",label:"Bio-impedance",icon:T,description:"Smart scale/device",accuracy:"Moderate accuracy"},{value:"other",label:"Other",icon:O,description:"Different method",accuracy:"Variable accuracy"}];function ae({value:p,onChange:m}){const{setCanGoNext:o,goNext:u}=C(),[s,y]=c.useState(l.find(a=>a.value===p.value)||l[0]),[A,x]=c.useState(!1),h=N.isNativePlatform();c.useEffect(()=>{d.startStep(3)},[]),c.useEffect(()=>{if(s){const a={value:s.value,label:s.label};try{E.parse(a),m(a),o(!0)}catch{o(!1)}}},[s,m,o]);const f=async a=>{h&&await S.impact({style:w.Medium}),y(a),x(!0),d.completeStep({step_number:3,step_name:"method",interaction_type:"tap",value:a.value}),setTimeout(()=>{u()},300)},g=e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx(r.div,{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-3xl bg-primary/10",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(R,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-foreground",children:"How did you measure?"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Select your measurement method"})]})]}),e.jsx(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.25},children:e.jsxs(n,{value:s,onChange:f,children:[e.jsx(n.Label,{className:"sr-only",children:"Choose measurement method"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map((a,v)=>{const b=a.icon;return e.jsx(n.Option,{value:a,className:({active:t,checked:j})=>i("relative rounded-2xl border-2 p-6 transition-all duration-200","flex flex-col items-center gap-3 text-center cursor-pointer","min-h-[120px] focus:outline-none focus:ring-4 focus:ring-primary/20",j?"border-primary bg-primary text-primary-foreground":"border-transparent bg-secondary/20 text-foreground hover:border-border hover:bg-secondary/30",t&&"ring-4 ring-primary/20"),children:({checked:t})=>e.jsxs(r.div,{className:"flex flex-col items-center gap-3 w-full",whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.05,duration:.25},children:[t&&e.jsx(r.div,{className:"absolute right-2 top-2",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1,duration:.2},children:e.jsx(_,{className:"h-5 w-5"})}),e.jsx("div",{className:i("flex h-12 w-12 items-center justify-center rounded-2xl",t?"bg-primary-foreground/20":"bg-primary/10"),children:e.jsx(b,{className:i("h-6 w-6",t?"text-primary-foreground":"text-primary")})}),e.jsxs("div",{children:[e.jsx("div",{className:i("mb-1 text-sm font-semibold",t?"text-primary-foreground":"text-foreground"),children:a.label}),e.jsx("div",{className:i("text-xs opacity-80",t?"text-primary-foreground":"text-muted-foreground"),children:a.description}),e.jsx("div",{className:i("text-xs opacity-60 mt-1",t?"text-primary-foreground":"text-muted-foreground"),children:a.accuracy})]})]})},a.value)})})]})}),e.jsxs(r.div,{className:"text-center text-sm text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.25},children:[e.jsx("p",{children:"Tap to select your measurement method"}),e.jsx("p",{className:"mt-1 opacity-75",children:"Different methods may have varying accuracy"})]})]});return e.jsx(r.div,{className:"space-y-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.25,type:"spring",damping:20},children:g})}export{ae as MethodStep};
